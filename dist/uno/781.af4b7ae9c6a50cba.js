(self.webpackChunkuno=self.webpackChunkuno||[]).push([[781],{781:(ct,H,k)=>{"use strict";k.r(H),k.d(H,{RoomModule:()=>Jt});var A=k(4755),M=k(3263),q=k(5784),rt=k(3833);function Y(i,o,r){(function dt(i,o){if(o.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")})(i,o),o.set(i,r)}function ot(i,o,r){if(!o.has(i))throw new TypeError("attempted to "+r+" private field on non-instance");return o.get(i)}function v(i,o){return function $(i,o){return o.get?o.get.call(i):o.value}(i,ot(i,o,"get"))}function P(i,o,r){return function nt(i,o,r){if(o.set)o.set.call(i,r);else{if(!o.writable)throw new TypeError("attempted to set read only private field");o.value=r}}(i,ot(i,o,"set"),r),r}var F=k(31),K=k.n(F),I=new WeakMap,j=new WeakMap;class Z extends(K()){constructor(o){super({wildcard:!0}),Y(this,I,{writable:!0,value:void 0}),Y(this,j,{writable:!0,value:void 0}),this.id=o.id,this.name=o.name,this.isOwner=o.isOwner??!1,this.online=o.online??!1,this.score=o.score??0,this.cardsCount=o.cardsCount??0,P(this,I,o.cards??[]),P(this,j,o.socket)}get cards(){return v(this,I)}setCards(o){P(this,I,o),this.cardsCount=v(this,I).length,this.socket?.emit("player:setCards",o)}addCards(o){v(this,I).push(...o),this.cardsCount=v(this,I).length,this.socket?.emit("player:addCards",o)}removeCard(o){v(this,I).splice(o,1),this.cardsCount=v(this,I).length,this.socket?.emit("player:removeCard",o)}get socket(){return v(this,j)}set socket(o){P(this,j,o)}setOnline(o,r){this.online=o,this.disconnectReason=r}}function J(i,o){o.on("*",function(...r){i.emit(this.event,...r)})}function U(i,o){return i&&(Array.isArray(i)?i.map(r=>U(r,o)):i instanceof o?i:new o(i))}var at=k(340);const V={EMPTY:[-1,0],"0_0":[0,0],"1_0":[0,1],"2_0":[0,2],"3_0":[0,3],"4_0":[0,4],"5_0":[0,5],"6_0":[0,6],"7_0":[0,7],"8_0":[0,8],"9_0":[0,9],SKIP_0:[0,10],REVERSE_0:[0,11],DRAW2_0:[0,12],"0_1":[1,0],"1_1":[1,1],"2_1":[1,2],"3_1":[1,3],"4_1":[1,4],"5_1":[1,5],"6_1":[1,6],"7_1":[1,7],"8_1":[1,8],"9_1":[1,9],SKIP_1:[1,10],REVERSE_1:[1,11],DRAW2_1:[1,12],"0_2":[3,0],"1_2":[3,1],"2_2":[3,2],"3_2":[3,3],"4_2":[3,4],"5_2":[3,5],"6_2":[3,6],"7_2":[3,7],"8_2":[3,8],"9_2":[3,9],SKIP_2:[3,10],REVERSE_2:[3,11],DRAW2_2:[3,12],"0_3":[2,0],"1_3":[2,1],"2_3":[2,2],"3_3":[2,3],"4_3":[2,4],"5_3":[2,5],"6_3":[2,6],"7_3":[2,7],"8_3":[2,8],"9_3":[2,9],SKIP_3:[2,10],REVERSE_3:[2,11],DRAW2_3:[2,12],"WILD_-1":[0,13],"WILDDRAW4_-1":[4,13]};for(const i in V)V[i][0]*=99.8,V[i][1]*=69.7;var S=new WeakMap,W=new WeakMap,_=new WeakMap,D=new WeakMap;class Q extends(K()){get descarte(){return v(this,W)}get baralho(){return v(this,_)}get playerCards(){return v(this,D)}get topo(){return v(this,W)[0]}get jogadorAtual(){return this.players[this.jogador]}constructor(o={}){super({wildcard:!0}),Y(this,S,{writable:!0,value:void 0}),Y(this,W,{writable:!0,value:void 0}),Y(this,_,{writable:!0,value:void 0}),Y(this,D,{writable:!0,value:void 0}),this.seed=o.seed??Math.random(),P(this,S,at(this.seed.toString())),P(this,W,o.descarteUltimaCarta?[o.descarteUltimaCarta]:[]),this.descarteUltimaCarta=o.descarteUltimaCarta??null,P(this,_,this.embaralhar()),this.baralhoCount=o.baralho??v(this,_).length,P(this,D,o.players?.map(()=>[])??[]),this.playerCardsCount=o.playerCardsCount??o.players?.map(()=>0)??[],this.players=U(o.players,Z)??[],this.direcao=o.direcao??1,this.jogador=o.jogador??Math.floor(v(this,S).call(this)*this.players.length),this.comprou=!1,this.unoPlayer=null,this.unoSalvo=!1}comeca(){this.distribuir(),this.tirarPrimeiraCarta()}start(o){this.constructor({seed:o})}embaralhar(){let o=[{id:0,icon:"0",color:0},{id:1,icon:"1",color:0},{id:2,icon:"1",color:0},{id:3,icon:"2",color:0},{id:4,icon:"2",color:0},{id:5,icon:"3",color:0},{id:6,icon:"3",color:0},{id:7,icon:"4",color:0},{id:8,icon:"4",color:0},{id:9,icon:"5",color:0},{id:10,icon:"5",color:0},{id:11,icon:"6",color:0},{id:12,icon:"6",color:0},{id:13,icon:"7",color:0},{id:14,icon:"7",color:0},{id:15,icon:"8",color:0},{id:16,icon:"8",color:0},{id:17,icon:"9",color:0},{id:18,icon:"9",color:0},{id:19,icon:"REVERSE",color:0},{id:20,icon:"REVERSE",color:0},{id:21,icon:"SKIP",color:0},{id:22,icon:"SKIP",color:0},{id:23,icon:"DRAW2",color:0},{id:24,icon:"DRAW2",color:0},{id:25,icon:"0",color:1},{id:26,icon:"1",color:1},{id:27,icon:"1",color:1},{id:28,icon:"2",color:1},{id:29,icon:"2",color:1},{id:30,icon:"3",color:1},{id:31,icon:"3",color:1},{id:32,icon:"4",color:1},{id:33,icon:"4",color:1},{id:34,icon:"5",color:1},{id:35,icon:"5",color:1},{id:36,icon:"6",color:1},{id:37,icon:"6",color:1},{id:38,icon:"7",color:1},{id:39,icon:"7",color:1},{id:40,icon:"8",color:1},{id:41,icon:"8",color:1},{id:42,icon:"9",color:1},{id:43,icon:"9",color:1},{id:44,icon:"REVERSE",color:1},{id:45,icon:"REVERSE",color:1},{id:46,icon:"SKIP",color:1},{id:47,icon:"SKIP",color:1},{id:48,icon:"DRAW2",color:1},{id:49,icon:"DRAW2",color:1},{id:50,icon:"0",color:2},{id:51,icon:"1",color:2},{id:52,icon:"1",color:2},{id:53,icon:"2",color:2},{id:54,icon:"2",color:2},{id:55,icon:"3",color:2},{id:56,icon:"3",color:2},{id:57,icon:"4",color:2},{id:58,icon:"4",color:2},{id:59,icon:"5",color:2},{id:60,icon:"5",color:2},{id:61,icon:"6",color:2},{id:62,icon:"6",color:2},{id:63,icon:"7",color:2},{id:64,icon:"7",color:2},{id:65,icon:"8",color:2},{id:66,icon:"8",color:2},{id:67,icon:"9",color:2},{id:68,icon:"9",color:2},{id:69,icon:"REVERSE",color:2},{id:70,icon:"REVERSE",color:2},{id:71,icon:"SKIP",color:2},{id:72,icon:"SKIP",color:2},{id:73,icon:"DRAW2",color:2},{id:74,icon:"DRAW2",color:2},{id:75,icon:"0",color:3},{id:76,icon:"1",color:3},{id:77,icon:"1",color:3},{id:78,icon:"2",color:3},{id:79,icon:"2",color:3},{id:80,icon:"3",color:3},{id:81,icon:"3",color:3},{id:82,icon:"4",color:3},{id:83,icon:"4",color:3},{id:84,icon:"5",color:3},{id:85,icon:"5",color:3},{id:86,icon:"6",color:3},{id:87,icon:"6",color:3},{id:88,icon:"7",color:3},{id:89,icon:"7",color:3},{id:90,icon:"8",color:3},{id:91,icon:"8",color:3},{id:92,icon:"9",color:3},{id:93,icon:"9",color:3},{id:94,icon:"REVERSE",color:3},{id:95,icon:"REVERSE",color:3},{id:96,icon:"SKIP",color:3},{id:97,icon:"SKIP",color:3},{id:98,icon:"DRAW2",color:3},{id:99,icon:"DRAW2",color:3},{id:100,icon:"WILD",color:-1},{id:101,icon:"WILD",color:-1},{id:102,icon:"WILD",color:-1},{id:103,icon:"WILD",color:-1},{id:104,icon:"WILDDRAW4",color:-1},{id:105,icon:"WILDDRAW4",color:-1},{id:106,icon:"WILDDRAW4",color:-1},{id:107,icon:"WILDDRAW4",color:-1}];return o=o.map(r=>({...r})),o.sort(()=>v(this,S).call(this)-v(this,S).call(this)),o}distribuir(){for(const o in this.players){const r=[];for(let d=0;d<3;d++)r.push(this.tirarCartaDoBaralho());this.setPlayerCards(+o,r),this.setPlayerCardsLength(+o,r.length)}}setPlayerCards(o,r){v(this,D)[o]=[...r],this.players[o].setCards([...r])}addPlayerCards(o,r){v(this,D)[o].push(...r),this.players[o].addCards(r)}removePlayerCard(o,r){v(this,D)[o].splice(r,1),this.players[o].removeCard(r)}setPlayerCardsLength(o,r){this.playerCardsCount[o]=r,this.emit("game:setPlayerCardsLength",o,r)}tirarPrimeiraCarta(){this.descartar(this.tirarCartaDoBaralho())}tirarCartaDoBaralho(){v(this,_).length<=1&&(this.emit("warning","O baralho foi reposto"),this.reporBaralho()),1===v(this,_).length&&this.emit("warning","O baralho acabou");const o=v(this,_).pop();return this.baralhoCount--,this.emit("game:tirarCartaDoBaralho"),o}setBaralhoCount(o){this.baralhoCount=o,this.emit("game:setBaralhoCount",o)}getMyCards(o){if("number"==typeof o)return v(this,D)[o];const r=this.players.findIndex(d=>d.id===o.id);return v(this,D)[r]}descartar(o){v(this,W).unshift(o),this.descarteUltimaCarta=o,this.emit("game:descartar",o)}jogar(o,r){r=r&&Number(r);const d=v(this,D)[this.jogador][o];if(!d)throw new Error("Carta inv\xe1lida");if("number"==typeof r&&(d.wildColor=r),!this.podeJogar(d))throw new Error(`Voc\xea n\xe3o pode jogar esta carta: COR: ${d.color}, \xcdCONE: ${d.icon}`);if(this.descartar(d),this.removePlayerCard(this.jogador,o),this.setPlayerCardsLength(this.jogador,v(this,D)[this.jogador].length),v(this,D)[this.jogador].length<=0)return this.emit("message",`${this.players[this.jogador]?.name} ganhou o jogo!`),void this.endGame(this.jogador);switch(this.unoPlayer=null,!this.unoSalvo&&1===v(this,D)[this.jogador].length&&this.setUNOPlayer(this.jogador),this.unoSalvo=!1,d.icon){case"REVERSE":this.inverter();break;case"SKIP":this.pular();break;case"DRAW2":this.compra2();break;case"WILDDRAW4":this.compra4()}this.proximoJogador()}proximoJogador(){this.comprou=!1;let o=this.jogador+this.direcao;o>=this.players.length&&(o=0),o<0&&(o=this.players.length-1),this.setJogador(o)}setJogador(o){this.jogador=o,this.emit("game:setJogador",o)}setUNOPlayer(o){this.unoPlayer=this.players[o]}gritarUNO(o){this.emit("game:gritarUNO",o);const r=this.players.findIndex(w=>w.id===o.id),d=this.players[r];if(!this.unoPlayer&&o.id===this.jogadorAtual.id)return void(this.unoSalvo=!0);if(!this.unoPlayer)return;if(o.id===this.unoPlayer?.id)return void(this.unoPlayer=null);const p=this.players.findIndex(w=>w.id===this.unoPlayer?.id);for(let w=0;w<2;w++)this.comprar(!0,p);this.unoPlayer.socket?.emit("message","Esqueceu de dizer UNO"),this.emit("warning",`${d?.name} percebeu que ${this.unoPlayer?.name} esqueceu de dizer UNO!`),this.unoPlayer=null}resetUNOPlayer(){this.unoPlayer=null,this.unoSalvo=!1}podeJogar(o){return-1===this.topo?.color&&void 0===this.topo?.wildColor||-1===this.topo?.color&&this.topo?.wildColor===o.color||this.topo?.color===o.color||this.topo?.icon===o.icon||-1===o.color}comprar(o=!1,r){if(o||this.resetUNOPlayer(),!o&&this.comprou)throw new Error("Voc\xea j\xe1 comprou, agora passe a vez");o||(this.comprou=!0);const d=this.tirarCartaDoBaralho();if(!d)return;const p=r??this.jogador;this.addPlayerCards(p,[d]),this.setPlayerCardsLength(p,v(this,D)[p].length)}reporBaralho(){const o=v(this,W).splice(1);o.sort(()=>v(this,S).call(this)-v(this,S).call(this)),o.forEach(r=>delete r.wildColor),v(this,_).push(...o),this.setBaralhoCount(v(this,_).length)}passar(){if(v(this,_).length&&!this.comprou)throw new Error("Voc\xea n\xe3o comprou uma carta, ent\xe3o n\xe3o pode passar");this.proximoJogador()}setPlayerOnline(o,r,d){const p=this.players.findIndex(w=>w.id===o);-1!==p&&(this.players[p].setOnline(r,d),this.emit("game:setPlayerOnline",o,r,d))}endGame(o){this.emit("endGame",o)}pular(){this.proximoJogador(),this.jogadorAtual.socket?.emit("message","Bloqueado")}inverter(){this.direcao*=-1,this.emit("game:inverter"),this.emit("message","Inverteu")}compra2(){this.proximoJogador();for(let o=0;o<2;o++)this.comprar(!0);this.jogadorAtual.socket?.emit("message","Comprou +2")}compra4(){this.proximoJogador();for(let o=0;o<4;o++)this.comprar(!0);this.jogadorAtual.socket?.emit("message","Comprou +4")}}class ft extends(K()){constructor(o){super({wildcard:!0}),this.id=o.id??function it(){return Math.floor(9999999*Math.random()).toString()}(),this.isPublic=o.isPublic??!1,this.started=o.started??!1,this.owner=o.owner??null,this.players=U(o.players,Z)??[],this.currentGame=U(o.currentGame??null,Q),this.currentGameIndex=o.currentGameIndex??-1,this.currentGame&&J(this,this.currentGame)}joinGame(o){if(this.players.some(d=>d.id===o.id))return;const r=U(o,Z);this.players.push(r),this.emit("room:joinGame",o)}setPlayerOnline(o,r,d){const p=this.players.find(w=>w.id===o.id);p&&(p.setOnline(r,d),this.emit("room:setPlayerOnline",o,r,d),this.currentGame?.setPlayerOnline(o.id,r,d))}startGame(o){this.currentGame=U(o,Q)??new Q({players:this.players}),this.emit("room:startGame",this.currentGame),J(this,this.currentGame),typeof window>"u"&&this.currentGame.comeca(),this.started=!0,this.currentGameIndex++,this.currentGame.on("endGame",r=>{this.endGame(r)})}endGame(o){this.currentGame=null,this.started=!1,this.players[o].score+=1,this.emit("room:endGame",o)}}var e=k(567),n=k(2340),t=k(5206),a=k(2018),s=k(4465),l=k(1594);function u(i,o){1&i&&(t.TgZ(0,"div",6),t._uU(1,"Esta sala n\xe3o existe"),t.qZA())}function f(i,o){1&i&&(t.TgZ(0,"div",6),t._uU(1,"C\xf3digo de sala inv\xe1lido"),t.qZA())}function m(i,o){if(1&i&&(t.TgZ(0,"div",6),t._uU(1," Ocorreu um erro ao carregar a sala: "),t.TgZ(2,"i"),t._uU(3),t.qZA()()),2&i){const r=t.oxw();t.xp6(3),t.Oqu(r.err)}}let h=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-room-error"]],inputs:{err:"err"},decls:8,vars:3,consts:[[1,"h-[100vh]","flex","items-center","justify-center","text-center","p-3","flex-col"],[3,"ngSwitch"],[1,"text-9xl","fas","fa-door-open"],["class","text-6xl mt-3",4,"ngSwitchCase"],["class","text-6xl mt-3",4,"ngSwitchDefault"],["routerLink","/rooms",1,"btn","btn-outline","btn-info","mt-6"],[1,"text-6xl","mt-3"]],template:function(r,d){1&r&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.YNc(3,u,2,0,"div",3),t.YNc(4,f,2,0,"div",3),t.YNc(5,m,4,1,"div",4),t.qZA(),t.TgZ(6,"button",5),t._uU(7,"Retornar \xe0s salas"),t.qZA()()),2&r&&(t.xp6(1),t.Q6J("ngSwitch",d.err),t.xp6(2),t.Q6J("ngSwitchCase","Esta sala n\xe3o existe"),t.xp6(1),t.Q6J("ngSwitchCase","Invalid namespace"))},dependencies:[A.RF,A.n9,A.ED,q.rH]}),i})();var g=k(8394);function L(i,o){if(1&i){const r=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(r);const p=t.oxw();return t.KtG(p.startGame())}),t._uU(1,"Iniciar partida"),t.qZA()}}function y(i,o){1&i&&(t.TgZ(0,"button",8),t._uU(1,"Iniciando..."),t.qZA())}function b(i,o){if(1&i&&(t.TgZ(0,"div",14),t._uU(1),t.qZA()),2&i){const r=t.oxw().$implicit;t.xp6(1),t.Oqu(r.score)}}function x(i,o){1&i&&(t.TgZ(0,"div",15),t._uU(1,"Voc\xea"),t.qZA())}function R(i,o){if(1&i&&(t.TgZ(0,"div")(1,"div",9),t._uU(2),t.qZA(),t._UZ(3,"img",10),t.TgZ(4,"div",11),t._uU(5),t.qZA(),t.YNc(6,b,2,1,"div",12),t.YNc(7,x,2,0,"div",13),t.qZA()),2&i){const r=o.$implicit,d=t.oxw();t.MT6("player bg-",d.seedColor(r.id),"-800 border-",d.seedColor(r.id),"-900 animate__animated animate__bounceIn"),t.ekj("border-white",r.id===d.sessionID)("owner",r.id===d.room.owner)("opacity-25",!r.online),t.xp6(2),t.Oqu(r.name||"(Sem nome)"),t.xp6(1),t.MGl("src","https://api.dicebear.com/6.x/avataaars/svg?seed=",r.id,"",t.LSH),t.xp6(2),t.Oqu(r.place),t.xp6(1),t.Q6J("ngIf",r.score),t.xp6(1),t.Q6J("ngIf",r.id===d.sessionID)}}let et=(()=>{class i{constructor(){this.seedColor=g.E,this.starting=!1,this.sessionID=localStorage.getItem("sessionID")||Math.random().toString()}startGame(){this.starting=!0,this.socket.timeout(5e3).emit("room:startGame",(r,d,p)=>{if(this.starting=!1,r||d)return alert(r?.message||d)})}get players(){const r=[...this.room.players].sort((E,O)=>O.score-E.score),d=[...new Set(r.map(E=>E.score).filter(E=>E>0))],p={1:"\u{1f947}",2:"\u{1f948}",3:"\u{1f949}"};return r.map(E=>{const O=d.indexOf(E.score)+1;return E.place=p[O>3||O<1?null:O]||"",E})}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-lobby"]],inputs:{room:"room",me:"me",socket:"socket"},decls:8,vars:4,consts:[[1,"container","max-w-6xl","mx-auto","px-5","py-4"],[1,"logo-style","mb-4","text-center"],[1,"text-center","my-5"],["class","btn btn-success",3,"click",4,"ngIf"],["class","btn","disabled","",4,"ngIf"],[1,"players"],[3,"class","border-white","owner","opacity-25",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],["disabled","",1,"btn"],[1,"player-name"],["alt","Avatar",1,"avatar","block",3,"src"],[1,"player-place"],["class","score",4,"ngIf"],["class","you",4,"ngIf"],[1,"score"],[1,"you"]],template:function(r,d){1&r&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,L,2,0,"button",3),t.YNc(5,y,2,0,"button",4),t.qZA(),t.TgZ(6,"div",5),t.YNc(7,R,8,15,"div",6),t.qZA()()),2&r&&(t.xp6(2),t.hij("Sala #",d.room.id,""),t.xp6(2),t.Q6J("ngIf",!d.starting),t.xp6(1),t.Q6J("ngIf",d.starting),t.xp6(2),t.Q6J("ngForOf",d.players))},dependencies:[A.sg,A.O5],styles:[".players[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:1rem}@media (min-width: 640px){.players[_ngcontent-%COMP%]{grid-template-columns:repeat(3,minmax(0,1fr))}}@media (min-width: 768px){.players[_ngcontent-%COMP%]{grid-template-columns:repeat(4,minmax(0,1fr))}}@media (min-width: 1024px){.players[_ngcontent-%COMP%]{grid-template-columns:repeat(5,minmax(0,1fr))}}.players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]{border-width:6px;padding:.75rem;padding-bottom:0;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity));--tw-shadow: 4px 4px black;--tw-shadow-colored: 4px 4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.players[_ngcontent-%COMP%]   .player.owner[_ngcontent-%COMP%]{border-radius:.5rem;--tw-border-opacity: 1;border-color:rgb(234 179 8 / var(--tw-border-opacity))}.players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .player-name[_ngcontent-%COMP%]{margin-bottom:.75rem;text-align:center;font-size:1.5rem;line-height:2rem}.players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%], .players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .you[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;display:flex;height:1.75rem;align-items:center;justify-content:center;border-top-right-radius:.125rem;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));padding-left:.5rem;padding-right:.5rem;--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity))}.players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{inset:0 0 auto auto;width:1.75rem;--tw-translate-x: 50%;--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-radius:9999px;--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity));padding:0;color:inherit}.players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .player-place[_ngcontent-%COMP%]{position:absolute;bottom:.25rem;right:.25rem;font-size:1.5rem;line-height:2rem}"]}),i})();function X(i,o,r,d,p,w,E){try{var O=i[w](E),N=O.value}catch(Qt){return void r(Qt)}O.done?o(N):Promise.resolve(N).then(d,p)}var B=k(4797);function G(i,o){1&i&&(t.TgZ(0,"div",8),t._UZ(1,"uno-card",9),t.qZA()),2&i&&(t.xp6(1),t.Q6J("@zoom",void 0)("back",!0)("size",.5))}let T=(()=>{class i{constructor(){this.vezDele=!1}cards(){return Array(this.quantidadeCartas||0).fill(0)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-player-slot"]],inputs:{player:"player",vezDele:"vezDele",quantidadeCartas:"quantidadeCartas"},decls:9,vars:10,consts:[[1,"slot","flex-1"],[1,"cards-container"],[1,"cards"],["class","uno-card-container",4,"ngFor","ngForOf"],[1,"avatar-container","h-0","md:h-auto"],["alt","Avatar",1,"avatar","w-0","md:w-[50px]","xl:w-[100px]",3,"src"],[1,"name-container"],[1,"name"],[1,"uno-card-container"],[3,"back","size"]],template:function(r,d){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,G,2,3,"div",3),t.qZA()(),t.TgZ(4,"div",4),t._UZ(5,"img",5),t.qZA(),t.TgZ(6,"div",6)(7,"div",7),t._uU(8),t.qZA()()()),2&r&&(t.ekj("empty",!d.player)("offline",!(null!=d.player&&d.player.online))("vez",d.vezDele),t.xp6(3),t.Q6J("ngForOf",d.cards()),t.xp6(2),t.MGl("src","https://api.dicebear.com/6.x/avataaars/svg?seed=",null==d.player?null:d.player.id,"",t.LSH),t.xp6(3),t.AsE(" ",(null==d.player?null:d.player.name)||"(Sem nome)"," ",null!=d.player&&d.player.online?"":"(offline)"," "))},dependencies:[A.sg,B.s],styles:['.uno-card-container[_ngcontent-%COMP%]{width:2px}.offline[_ngcontent-%COMP%]{opacity:.6}.vez[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1.75rem;--tw-text-opacity: 1;color:rgb(250 204 21 / var(--tw-text-opacity))}.slot[_ngcontent-%COMP%]{display:flex;height:100%;width:100%;align-items:center;justify-content:center;text-align:center}.slot.empty[_ngcontent-%COMP%]{display:none}.avatar-container[_ngcontent-%COMP%]{position:relative}.avatar-container[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;height:100%;width:100%;--tw-scale-x: 0;--tw-scale-y: 0;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-radius:9999px;--tw-bg-opacity: 1;background-color:rgb(234 179 8 / var(--tw-bg-opacity));transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.vez[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]:before{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cards-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.name-container[_ngcontent-%COMP%]{display:flex;height:30px;width:30px;align-items:center;justify-content:center}.cards[_ngcontent-%COMP%]{position:absolute;display:flex;padding-right:1rem}.cards[_ngcontent-%COMP%]   .uno-card-container[_ngcontent-%COMP%]{width:1.25rem!important}'],data:{animation:[e.w]}}),i})();const pt=function(){return{id:0,color:0,icon:""}},gt=function(){return{id:0,color:1,icon:""}},_t=function(){return{id:0,color:2,icon:""}},vt=function(){return{id:0,color:3,icon:""}};function wt(i,o){if(1&i){const r=t.EpF();t.TgZ(0,"div",1)(1,"h1",2),t._uU(2,"Selecione uma cor"),t.qZA(),t.TgZ(3,"div",3)(4,"uno-card",4),t.NdJ("click",function(){t.CHM(r);const p=t.oxw();return t.KtG(p.s(0))}),t.qZA(),t.TgZ(5,"uno-card",5),t.NdJ("click",function(){t.CHM(r);const p=t.oxw();return t.KtG(p.s(1))}),t.qZA(),t.TgZ(6,"uno-card",6),t.NdJ("click",function(){t.CHM(r);const p=t.oxw();return t.KtG(p.s(2))}),t.qZA(),t.TgZ(7,"uno-card",7),t.NdJ("click",function(){t.CHM(r);const p=t.oxw();return t.KtG(p.s(3))}),t.qZA()(),t.TgZ(8,"button",8),t.NdJ("click",function(){t.CHM(r);const p=t.oxw();return t.KtG(p.s(!1))}),t._uU(9,"Cancelar"),t.qZA()()}2&i&&(t.Q6J("@fade",void 0),t.xp6(4),t.Q6J("card",t.DdM(5,pt)),t.xp6(1),t.Q6J("card",t.DdM(6,gt)),t.xp6(1),t.Q6J("card",t.DdM(7,_t)),t.xp6(1),t.Q6J("card",t.DdM(8,vt)))}let yt=(()=>{class i{s(r){this.select?.(r)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-select-color"]],inputs:{select:"select"},decls:1,vars:1,consts:[["class","bg text-center p-5",4,"ngIf"],[1,"bg","text-center","p-5"],[1,"text-5xl","mb-10"],[1,"flex","gap-3","mb-10","flex-wrap","justify-center"],[1,"uno-card","animate__animated","animate__flipInY",2,"animation-delay","0s",3,"card","click"],[1,"uno-card","animate__animated","animate__flipInY",2,"animation-delay","0.1s",3,"card","click"],[1,"uno-card","animate__animated","animate__flipInY",2,"animation-delay","0.2s",3,"card","click"],[1,"uno-card","animate__animated","animate__flipInY",2,"animation-delay","0.3s",3,"card","click"],[1,"btn","btn-error","btn-outline",3,"click"]],template:function(r,d){1&r&&t.YNc(0,wt,10,9,"div",0),2&r&&t.Q6J("ngIf",!!d.select)},dependencies:[A.O5,B.s],styles:[".bg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:1;display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;background-color:rgb(0 0 0 / var(--tw-bg-opacity));--tw-bg-opacity: .9}.uno-card[_ngcontent-%COMP%]{--size: .8;--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));cursor:pointer;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.uno-card[_ngcontent-%COMP%]:hover{--tw-scale-x: 1.1 !important;--tw-scale-y: 1.1 !important;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))!important}.uno-card[_ngcontent-%COMP%]:active{--tw-scale-x: .9 !important;--tw-scale-y: .9 !important;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))!important}@media (min-width: 768px){.uno-card[_ngcontent-%COMP%]{--size: 1.5}}"],data:{animation:[(0,e.q)()]}}),i})();const bt=["myCards"];function xt(i,o){if(1&i&&t._UZ(0,"app-player-slot",28),2&i){const r=t.oxw(2);t.Q6J("player",r.getPlayer(1))("vezDele",r.getVezDele(1))("quantidadeCartas",r.getQuantidadeCartas(1))}}function Ct(i,o){if(1&i&&t._UZ(0,"app-player-slot",28),2&i){const r=t.oxw(2);t.Q6J("player",r.getPlayer(0))("vezDele",r.getVezDele(0))("quantidadeCartas",r.getQuantidadeCartas(0))}}function Et(i,o){if(1&i&&t._UZ(0,"app-player-slot",28),2&i){const r=t.oxw(2);t.Q6J("player",r.getPlayer(2))("vezDele",r.getVezDele(2))("quantidadeCartas",r.getQuantidadeCartas(2))}}function kt(i,o){if(1&i&&t._UZ(0,"app-player-slot",28),2&i){const r=t.oxw(2);t.Q6J("player",r.getPlayer(3))("vezDele",r.getVezDele(3))("quantidadeCartas",r.getQuantidadeCartas(3))}}function Pt(i,o){if(1&i){const r=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(r);const p=t.oxw(2);return t.KtG(p.passar())}),t._uU(1," PASSAR "),t.qZA()}2&i&&t.Q6J("@fade",void 0)}function Lt(i,o){if(1&i){const r=t.EpF();t.TgZ(0,"div",30),t.NdJ("click",function(){const p=t.CHM(r),w=p.index,E=p.$implicit,O=t.oxw(2);return t.KtG(O.jogar(w,E))}),t._UZ(1,"uno-card",31),t.qZA()}if(2&i){const r=o.$implicit,d=t.oxw(2);t.ekj("naoPode",!d.game.podeJogar(r)),t.xp6(1),t.Q6J("@zoom",void 0)("card",r)}}function Ot(i,o){if(1&i&&t._UZ(0,"app-player-slot",28),2&i){const r=t.oxw(2);t.Q6J("player",r.getPlayer(4))("vezDele",r.getVezDele(4))("quantidadeCartas",r.getQuantidadeCartas(4))}}function Rt(i,o){if(1&i&&t._UZ(0,"app-player-slot",28),2&i){const r=t.oxw(2);t.Q6J("player",r.getPlayer(5))("vezDele",r.getVezDele(5))("quantidadeCartas",r.getQuantidadeCartas(5))}}const Mt=function(){return[]};function Tt(i,o){if(1&i){const r=t.EpF();t.TgZ(0,"main",2)(1,"div",3),t.YNc(2,xt,1,3,"app-player-slot",4),t.YNc(3,Ct,1,3,"app-player-slot",4),t.qZA(),t.TgZ(4,"div",5)(5,"div",6),t.YNc(6,Et,1,3,"app-player-slot",4),t.YNc(7,kt,1,3,"app-player-slot",4),t.qZA(),t.TgZ(8,"div",7)(9,"div",8)(10,"div",9)(11,"button",10),t.NdJ("click",function(){t.CHM(r);const p=t.oxw();return t.KtG(p.fullscreen())}),t._UZ(12,"i",11),t.qZA(),t.TgZ(13,"h1",12),t._uU(14),t.qZA(),t.TgZ(15,"button",13),t.NdJ("click",function(){t.CHM(r);const p=t.oxw();return t.KtG(p.gritarUNO())}),t._UZ(16,"img",14),t.qZA(),t._UZ(17,"uno-card",15),t.TgZ(18,"div",16),t.NdJ("click",function(){t.CHM(r);const p=t.oxw();return t.KtG(!p.game.comprou&&p.comprar())}),t._UZ(19,"uno-card",17)(20,"uno-card",18),t.qZA(),t._UZ(21,"img",19),t.YNc(22,Pt,2,1,"button",20),t.qZA()()(),t.TgZ(23,"div",21)(24,"div",22)(25,"div",23)(26,"div",24,25),t.YNc(28,Lt,2,4,"div",26),t.qZA()()()()(),t.TgZ(29,"div",27),t.YNc(30,Ot,1,3,"app-player-slot",4),t.YNc(31,Rt,1,3,"app-player-slot",4),t.qZA()()}if(2&i){const r=t.oxw();t.xp6(2),t.Q6J("ngIf",r.getPlayer(1)),t.xp6(1),t.Q6J("ngIf",r.getPlayer(0)),t.xp6(3),t.Q6J("ngIf",r.getPlayer(2)),t.xp6(1),t.Q6J("ngIf",r.getPlayer(3)),t.xp6(7),t.hij(" \xc9 a ",r.game.jogadorAtual.id===r.me.id?"sua vez":"vez de "+(r.game.jogadorAtual.name||"(Sem nome)")," "),t.xp6(3),t.Q6J("card",r.game.descarteUltimaCarta),t.xp6(1),t.ekj("disabled",r.game.comprou||r.game.jogadorAtual.id!==r.me.id),t.Q6J("hidden",r.game.baralhoCount<=0),t.xp6(1),t.Q6J("back",!0)("hidden",1===r.game.baralhoCount),t.xp6(1),t.Q6J("back",!0),t.xp6(1),t.ekj("inverted",-1===r.game.direcao),t.xp6(1),t.Q6J("ngIf",r.game.jogadorAtual.id===r.me.id&&r.game.comprou),t.xp6(3),t.ekj("disabled",r.game.jogadorAtual.id!==r.me.id),t.xp6(3),t.Q6J("ngForOf",r.me.cards||t.DdM(21,Mt))("ngForTrackBy",r.trackById),t.xp6(2),t.Q6J("ngIf",r.getPlayer(4)),t.xp6(1),t.Q6J("ngIf",r.getPlayer(5))}}const At=[[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,0,-1,-1,-1],[-1,-1,0,1,-1,-1],[-1,0,1,-1,2,-1],[-1,0,1,2,3,-1],[0,1,2,-1,3,4],[0,1,2,3,4,5]];let Dt=(()=>{class i{ngOnInit(){this.playerMap=At[(this.game.players.length>7?7:this.game.players.length)??0],this.socket.on("player:addCards",this.onAddCards.bind(this)),window.room=this.room,window.me=this.me,window.game=this}ngOnDestroy(){this.socket.off("player:addCards",[this.onAddCards.bind(this)]),this.socket.off("game:setJogador",[this.setComprouFalse.bind(this)])}onAddCards(){setTimeout(()=>{this.myCards?.nativeElement.scrollTo({left:this.myCards.nativeElement.scrollWidth,behavior:"smooth"})},300)}jogar(r,d){var p=this;return function z(i){return function(){var o=this,r=arguments;return new Promise(function(d,p){var w=i.apply(o,r);function E(N){X(w,d,p,E,O,"next",N)}function O(N){X(w,d,p,E,O,"throw",N)}E(void 0)})}}(function*(){if(-1===d.color){const w=yield new Promise(E=>{p.selectColor=E});if(p.selectColor=void 0,"number"!=typeof w)return;p.socket.emit("game:jogar",r,w)}else p.socket.emit("game:jogar",r)})()}comprar(){this.socket.emit("game:comprar"),this.game.comprou=!0,this.socket.on("game:setJogador",this.setComprouFalse.bind(this))}setComprouFalse(){this.game.comprou=!1}passar(){this.socket.emit("game:passar")}gritarUNO(){this.socket.emit("game:gritarUNO",this.me)}getPlayer(r){return this.sortedPlayers()[this.playerMap[r]]?.player}getVezDele(r){return this.game.jogadorAtual.id===this.sortedPlayers()[this.playerMap[r]]?.player.id}getQuantidadeCartas(r){const d=this.sortedPlayers()[this.playerMap[r]]?.index??-1;return this.game.playerCardsCount[d]}players(r=!0){let d=this.game?.players.map((p,w)=>({player:p,index:w}));return r&&(d=d.filter(p=>p.player.id!==this.me.id)),d}sortedPlayers(){if(!this.game)return[];const r=this.game.players.map((O,N)=>({player:O,index:N})),d=r.findIndex(O=>O.player.id===this.me.id),p=r.slice(d+1),w=r.slice(0,d);return p.concat(w)}trackById(r,d){return d.id}fullscreen(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-game"]],viewQuery:function(r,d){if(1&r&&t.Gf(bt,5),2&r){let p;t.iGM(p=t.CRH())&&(d.myCards=p.first)}},inputs:{room:"room",me:"me",socket:"socket",game:"game"},decls:2,vars:2,consts:[["class","game-container flex flex-row","style","height: 100vh",4,"ngIf"],[3,"select"],[1,"game-container","flex","flex-row",2,"height","100vh"],[1,"slots-left","flex","flex-col"],["class","flex-1",3,"player","vezDele","quantidadeCartas",4,"ngIf"],[1,"flex","flex-col","flex-1","overflow-hidden"],[1,"flex","flex-row","slots-top"],[1,"flex","flex-row","flex-1","p-5"],[1,"slot","slot-middle","flex-1","flex","flex-col"],[1,"slot","slot-middle","flex-1","flex","flex-col","relative","w-full","h-full","items-center","justify-center","text-center","max-w-sm","max-h-96","rounded-lg",2,"background-image","url('/assets/wood-texture.svg')"],[1,"btn","btn-square","btn-sm","absolute","top-2","left-2",3,"click"],[1,"fas","fa-expand"],[1,"absolute","right-2","top-1","text-black"],[1,"gritar-uno",3,"click"],["src","/assets/uno-logo.svg","alt","Logo UNO",1,"w-[50px]","mx-auto"],[1,"center-card",3,"card"],["tabindex","0",1,"baralho",3,"hidden","click"],[1,"cartas",3,"back","hidden"],[1,"carta-topo",3,"back"],["src","/assets/arrow-rotate.svg",1,"game-rotation","absolute","bottom-3","left-3"],["class","btn mt-2 absolute right-2 bottom-2 sm:btn-sm md:btn-md",3,"click",4,"ngIf"],[1,"flex","flex-row"],[1,"w-full","slot"],[1,"my-cards-container"],[1,"my-cards"],["myCards",""],["class","uno-card",3,"naoPode","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-col","slots-right"],[1,"flex-1",3,"player","vezDele","quantidadeCartas"],[1,"btn","mt-2","absolute","right-2","bottom-2","sm:btn-sm","md:btn-md",3,"click"],[1,"uno-card",3,"click"],["tabindex","0",1,"my-card",3,"card"]],template:function(r,d){1&r&&(t.YNc(0,Tt,32,22,"main",0),t._UZ(1,"app-select-color",1)),2&r&&(t.Q6J("ngIf",d.game&&d.playerMap),t.xp6(1),t.Q6J("select",d.selectColor))},dependencies:[A.sg,A.O5,B.s,T,yt],styles:["body{overflow:hidden}.game-container[_ngcontent-%COMP%]{display:flex;flex:1 1 0%;overflow:hidden}.players[_ngcontent-%COMP%]{width:200px;padding:5px}.main-game[_ngcontent-%COMP%]{display:flex;flex:1 1 0%;flex-direction:column;align-items:center;justify-content:center;padding:1.25rem}.my-cards-container[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center;overflow-x:auto;transition:.3s ease}.my-cards-container.disabled[_ngcontent-%COMP%]{pointer-events:none;--tw-translate-y: 50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));cursor:not-allowed;opacity:.5}.my-cards-container[_ngcontent-%COMP%] > .my-cards[_ngcontent-%COMP%]{display:flex;max-width:100%;overflow-x:auto;padding:.5rem}.my-cards-container[_ngcontent-%COMP%] > .my-cards[_ngcontent-%COMP%] > .uno-card[_ngcontent-%COMP%]{margin-right:3px;display:flex;cursor:pointer;transition:.1s ease}.my-cards-container[_ngcontent-%COMP%]:not(.disabled) > .my-cards[_ngcontent-%COMP%] > .uno-card[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.my-cards-container[_ngcontent-%COMP%]:not(.disabled) > .my-cards[_ngcontent-%COMP%] > .uno-card[_ngcontent-%COMP%]:active{transform:scale(.9)}.my-cards-container[_ngcontent-%COMP%]:not(.disabled) > .my-cards[_ngcontent-%COMP%] > .uno-card.naoPode[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed;opacity:.6}.slot[_ngcontent-%COMP%]{display:flex;height:100%;width:100%;align-items:center;justify-content:center;text-align:center}.slot.empty[_ngcontent-%COMP%]{display:none}  .cards-container{display:flex;align-items:center;justify-content:center}  .slot .name{position:absolute;white-space:nowrap}  .slots-top .slot{flex-direction:column!important;justify-content:flex-start}  .slots-top .slot .cards-container{height:50px;width:100%}  .slots-left .slot{justify-content:flex-start}  .slots-right .slot{flex-direction:row-reverse;justify-content:flex-start}  .slots-left .slot .cards-container,   .slots-right .slot .cards-container{height:100%;width:50px}  .slots-top .slot{flex-direction:column-reverse!important}  .slots-top .slot .name-container{order:-1}  .slots-left .slot .cards-container .cards,   .slots-left .slot .avatar,   .slots-left .slot .name{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}  .slots-left .slot .cards-container .cards,   .slots-left .slot .avatar{--tw-translate-x: -10px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}  .slots-right .slot .cards-container .cards,   .slots-right .slot .avatar,   .slots-right .slot .name{--tw-rotate: -90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}  .slots-right .slot .cards-container .cards,   .slots-right .slot .avatar{--tw-translate-x: 10px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.game-rotation[_ngcontent-%COMP%]{pointer-events:none;width:5rem;opacity:.3;animation:_ngcontent-%COMP%_rotate 10s linear infinite}.game-rotation.inverted[_ngcontent-%COMP%]{--tw-scale-x: -1;--tw-scale-y: -1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));animation-direction:reverse}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0) scaleX(var(--tw-scale-x, 1))}50%{transform:rotate(180deg) scaleX(var(--tw-scale-x, 1))}to{transform:rotate(360deg) scaleX(var(--tw-scale-x, 1))}}.gritar-uno[_ngcontent-%COMP%]{position:absolute;left:.75rem;top:50%;display:flex;height:4rem;width:4rem;--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));align-items:center;justify-content:center;border-radius:9999px;--tw-bg-opacity: 1;background-color:rgb(237 28 36 / var(--tw-bg-opacity));box-shadow:#9d0208 0 8px,#000 0 8px 10px;border-bottom:#ffffff80 3px solid;transition:.3s ease}.gritar-uno[_ngcontent-%COMP%]:active{border-bottom:transparent 3px solid;box-shadow:#9d0208 0 0,#000 0 0 3px;transform:translateY(calc(-50% + 8px))}.baralho[_ngcontent-%COMP%]   .carta-topo[_ngcontent-%COMP%]{position:absolute;right:.75rem;top:50%;--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.baralho[_ngcontent-%COMP%]   .cartas[_ngcontent-%COMP%]{position:absolute;right:.75rem;top:50%;--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-radius:12px;--tw-shadow: black 5px 5px;--tw-shadow-colored: 5px 5px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.baralho[_ngcontent-%COMP%]:not(.disabled):hover   .carta-topo[_ngcontent-%COMP%], .baralho[_ngcontent-%COMP%]:not(.disabled):focus   .carta-topo[_ngcontent-%COMP%]{--tw-translate-x: -.5rem;cursor:pointer;--tw-translate-y:calc(-50% - .5rem);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.center-card[_ngcontent-%COMP%]{--size: 1}.my-card[_ngcontent-%COMP%]{--size: .7}@media (min-width: 768px){.center-card[_ngcontent-%COMP%]{--size: 1.5}.my-card[_ngcontent-%COMP%]{--size: 1}}"],data:{animation:[e.w,(0,e.q)()]}}),i})();function It(i,o){if(1&i&&t._UZ(0,"app-room-error",4),2&i){const r=t.oxw();t.Q6J("err",r.error)}}function Gt(i,o){if(1&i&&t._UZ(0,"app-lobby",5),2&i){const r=t.oxw();t.Q6J("room",r.room)("me",r.me)("socket",r.socket)}}function jt(i,o){if(1&i&&t._UZ(0,"app-game",6),2&i){const r=t.oxw();t.Q6J("room",r.room)("game",r.room.currentGame)("me",r.me)("socket",r.socket)}}function St(i,o){1&i&&t._UZ(0,"app-loading",7),2&i&&t.Q6J("@fade",void 0)}function mt(i,o,r){if(!i)return;const d=i[o];return d?d.bind(i)(...r):void 0}const Yt=[{path:"",component:(()=>{class i{constructor(r,d,p){this.route=r,this.toastr=d,this.toastService=p,this.me=new Z({id:"",name:"Jogador"});const w=this.route.snapshot.queryParamMap.get("id")||"",E=this.route.snapshot.queryParamMap.get("sessionID")||localStorage.getItem("sessionID"),O=this.route.snapshot.queryParamMap.get("name")||localStorage.getItem("name");this.roomID=w,this.socket=new rt.s(((i,o,r)=>({url:`${n.O.api}/room/${i}?sessionID=${o}&name=${r}`,options:{transports:["websocket"],withCredentials:!0}}))(w,E||"a",O||"Jo\xe3o")),this.socket.on("connect_error",this.connect_error.bind(this)),this.socket.on("connect",this.connect.bind(this)),this.socket.on("disconnect",this.disconnect.bind(this)),this.socket.on("warning",this.warning.bind(this)),this.socket.on("error",this.errorr.bind(this)),this.socket.on("message",this.message.bind(this)),this.socket.on("player:data",this.player_data.bind(this)),this.socket.on("game:gritarUNO",this.game_gritarUNO.bind(this)),this.socket.on("room:data",this.room_data.bind(this)),this.socket.on("room:startGame",this.room_startGame.bind(this)),this.socket.on("room:setPlayerOnline",this.room_setPlayerOnline.bind(this)),this.socket.ioSocket.onAny(this.socketEvent.bind(this))}ngOnDestroy(){this.socket.off("connect_error",[this.connect_error.bind(this)]),this.socket.off("connect",[this.connect.bind(this)]),this.socket.off("disconnect",[this.disconnect.bind(this)]),this.socket.off("warning",[this.warning.bind(this)]),this.socket.off("error",[this.errorr.bind(this)]),this.socket.off("message",[this.message.bind(this)]),this.socket.off("player:data",[this.player_data.bind(this)]),this.socket.off("room:data",[this.room_data.bind(this)]),this.socket.off("room:startGame",[this.room_startGame.bind(this)]),this.socket.off("room:setPlayerOnline",[this.room_setPlayerOnline.bind(this)]),this.socket.ioSocket.offAny([this.socketEvent.bind(this)])}connect_error(r){this.error=r?.message||r}connect(){}disconnect(r){this.toastr.error(r,"Conex\xe3o perdida, motivo:")}warning(r){this.toastr.warning(r?.message||r,"AVISO",{})}errorr(r){this.toastr.error(r?.message||r,"ERRO")}message(r){this.toastService.showToast(r)}player_data(r){this.me=new Z(r)}game_gritarUNO(r){this.toastr.info(`${r.name} gritou UNO`)}room_data(r){this.room=new ft(r)}room_startGame(){this.toastService.showToast("O jogo come\xe7ou")}room_setPlayerOnline(r){this.toastr.info(`${r.name} ${r.online?"est\xe1 online":"ficou offline"}`)}socketEvent(r,...d){const[p,w]=r.split(":");switch(p){case"room":mt(this.room,w,d);break;case"player":mt(this.me,w,d);break;case"game":mt(this.room.currentGame,w,d)}}}return i.\u0275fac=function(r){return new(r||i)(t.Y36(q.gz),t.Y36(a._W),t.Y36(s.k))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-room"]],decls:4,vars:4,consts:[[3,"err",4,"ngIf"],[3,"room","me","socket",4,"ngIf"],[3,"room","game","me","socket",4,"ngIf"],["message","Carregando sala",4,"ngIf"],[3,"err"],[3,"room","me","socket"],[3,"room","game","me","socket"],["message","Carregando sala"]],template:function(r,d){1&r&&(t.YNc(0,It,1,1,"app-room-error",0),t.YNc(1,Gt,1,3,"app-lobby",1),t.YNc(2,jt,1,4,"app-game",2),t.YNc(3,St,1,1,"app-loading",3)),2&r&&(t.Q6J("ngIf",d.error),t.xp6(1),t.Q6J("ngIf",d.room&&!d.room.currentGame),t.xp6(1),t.Q6J("ngIf",d.room&&d.room.currentGame),t.xp6(1),t.Q6J("ngIf",!d.room&&!d.error))},dependencies:[A.O5,l.N,h,et,Dt],data:{animation:[(0,e.q)()]}}),i})()}];let Zt=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[q.Bz.forChild(Yt),q.Bz]}),i})();var Wt=k(9017);let Jt=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[A.ez,Zt,M.a,Wt.I]}),i})()},31:(ct,H,k)=>{var A;!function(M){var q=Object.hasOwnProperty,rt=Array.isArray?Array.isArray:function(n){return"[object Array]"===Object.prototype.toString.call(n)},Y="object"==typeof process&&"function"==typeof process.nextTick,$="function"==typeof Symbol,ot="object"==typeof Reflect,nt="function"==typeof setImmediate?setImmediate:setTimeout,P=$?ot&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var n=Object.getOwnPropertyNames(e);return n.push.apply(n,Object.getOwnPropertySymbols(e)),n}:Object.keys;function F(){this._events={},this._conf&&K.call(this,this._conf)}function K(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==M&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function I(e,n){var t="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(t+=" Event name: "+n+"."),typeof process<"u"&&process.emitWarning){var a=new Error(t);a.name="MaxListenersExceededWarning",a.emitter=this,a.count=e,process.emitWarning(a)}else console.error(t),console.trace&&console.trace()}var j=function(e,n,t){var a=arguments.length;switch(a){case 0:return[];case 1:return[e];case 2:return[e,n];case 3:return[e,n,t];default:for(var s=new Array(a);a--;)s[a]=arguments[a];return s}};function Z(e,n){for(var t={},s=e.length,l=n?n.length:0,u=0;u<s;u++)t[e[u]]=u<l?n[u]:M;return t}function it(e,n,t){var a,s;if(this._emitter=e,this._target=n,this._listeners={},this._listenersCount=0,(t.on||t.off)&&(a=t.on,s=t.off),n.addEventListener?(a=n.addEventListener,s=n.removeEventListener):n.addListener?(a=n.addListener,s=n.removeListener):n.on&&(a=n.on,s=n.off),!a&&!s)throw Error("target does not implement any known event API");if("function"!=typeof a)throw TypeError("on method must be a function");if("function"!=typeof s)throw TypeError("off method must be a function");this._on=a,this._off=s;var l=e._observers;l?l.push(this):e._observers=[this]}function J(e,n,t,a){var s=Object.assign({},n);if(!e)return s;if("object"!=typeof e)throw TypeError("options must be an object");var f,m,h,l=Object.keys(e),u=l.length;function g(y){throw Error('Invalid "'+f+'" option value'+(y?". Reason: "+y:""))}for(var L=0;L<u;L++){if(f=l[L],!a&&!q.call(n,f))throw Error('Unknown "'+f+'" option');(m=e[f])!==M&&(s[f]=(h=t[f])?h(m,g):m)}return s}function U(e,n){return("function"!=typeof e||!e.hasOwnProperty("prototype"))&&n("value must be a constructor"),e}function at(e){var n="value must be type of "+e.join("|"),t=e.length,a=e[0],s=e[1];return 1===t?function(l,u){if(typeof l===a)return l;u(n)}:2===t?function(l,u){var f=typeof l;if(f===a||f===s)return l;u(n)}:function(l,u){for(var f=typeof l,m=t;m-- >0;)if(f===e[m])return l;u(n)}}Object.assign(it.prototype,{subscribe:function(e,n,t){var a=this,s=this._target,l=this._emitter,u=this._listeners,f=function(){var m=j.apply(null,arguments),h={data:m,name:n,original:e};t?!1!==t.call(s,h)&&l.emit.apply(l,[h.name].concat(m)):l.emit.apply(l,[n].concat(m))};if(u[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,l._newListener&&l._removeListener&&!a._onNewListener?(this._onNewListener=function(m){m===n&&null===u[e]&&(u[e]=f,a._on.call(s,e,f))},l.on("newListener",this._onNewListener),this._onRemoveListener=function(m){m===n&&!l.hasListeners(m)&&u[e]&&(u[e]=null,a._off.call(s,e,f))},u[e]=null,l.on("removeListener",this._onRemoveListener)):(u[e]=f,a._on.call(s,e,f))},unsubscribe:function(e){var s,l,m,n=this,t=this._listeners,a=this._emitter,u=this._off,f=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function h(){n._onNewListener&&(a.off("newListener",n._onNewListener),a.off("removeListener",n._onRemoveListener),n._onNewListener=null,n._onRemoveListener=null);var g=lt.call(a,n);a._observers.splice(g,1)}if(e){if(!(s=t[e]))return;u.call(f,e,s),delete t[e],--this._listenersCount||h()}else{for(m=(l=P(t)).length;m-- >0;)u.call(f,e=l[m],t[e]);this._listeners={},this._listenersCount=0,h()}}});var c=at(["function"]),ht=at(["object","function"]);function st(e,n,t){var a,s,u,l=0,f=new e(function(m,h,g){function L(){s&&(s=null),l&&(clearTimeout(l),l=0)}t=J(t,{timeout:0,overload:!1},{timeout:function(x,R){return("number"!=typeof(x*=1)||x<0||!Number.isFinite(x))&&R("timeout must be a positive number"),x}});var y=function(x){L(),m(x)},b=function(x){L(),h(x)};(a=!t.overload&&"function"==typeof e.prototype.cancel&&"function"==typeof g)?n(y,b,g):(s=[function(x){b(x||Error("canceled"))}],n(y,b,function(x){if(u)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof x)throw TypeError("onCancel callback must be a function");s.push(x)}),u=!0),t.timeout>0&&(l=setTimeout(function(){var x=Error("timeout");x.code="ETIMEDOUT",l=0,f.cancel(x),h(x)},t.timeout))});return a||(f.cancel=function(m){if(s){for(var h=s.length,g=1;g<h;g++)s[g](m);s[0](m),s=null}}),f}function lt(e){var n=this._observers;if(!n)return-1;for(var t=n.length,a=0;a<t;a++)if(n[a]._target===e)return a;return-1}function C(e,n,t,a,s){if(!t)return null;if(0===a){var l=typeof n;if("string"===l){var u,f,m=0,h=0,g=this.delimiter,L=g.length;if(-1!==(f=n.indexOf(g))){u=new Array(5);do{u[m++]=n.slice(h,f),h=f+L}while(-1!==(f=n.indexOf(g,h)));u[m++]=n.slice(h),n=u,s=m}else n=[n],s=1}else"object"===l?s=n.length:(n=[n],s=1)}var b,x,R,et,X,G,T,y=null,z=n[a],B=n[a+1];if(a===s)t._listeners&&("function"==typeof t._listeners?(e&&e.push(t._listeners),y=[t]):(e&&e.push.apply(e,t._listeners),y=[t]));else{if("*"===z){for(f=(G=P(t)).length;f-- >0;)"_listeners"!==(b=G[f])&&(T=C(e,n,t[b],a+1,s))&&(y?y.push.apply(y,T):y=T);return y}if("**"===z){for((X=a+1===s||a+2===s&&"*"===B)&&t._listeners&&(y=C(e,n,t,s,s)),f=(G=P(t)).length;f-- >0;)"_listeners"!==(b=G[f])&&("*"===b||"**"===b?(t[b]._listeners&&!X&&(T=C(e,n,t[b],s,s))&&(y?y.push.apply(y,T):y=T),T=C(e,n,t[b],a,s)):T=C(e,n,t[b],b===B?a+2:a,s),T&&(y?y.push.apply(y,T):y=T));return y}t[z]&&(y=C(e,n,t[z],a+1,s))}if((x=t["*"])&&C(e,n,x,a+1,s),R=t["**"])if(a<s)for(R._listeners&&C(e,n,R,s,s),f=(G=P(R)).length;f-- >0;)"_listeners"!==(b=G[f])&&(b===B?C(e,n,R[b],a+2,s):b===z?C(e,n,R[b],a+1,s):((et={})[b]=R[b],C(e,n,{"**":et},a+1,s)));else R._listeners?C(e,n,R,s,s):R["*"]&&R["*"]._listeners&&C(e,n,R["*"],s,s);return y}function ut(e,n,t){var l,m,a=0,s=0,u=this.delimiter,f=u.length;if("string"==typeof e)if(-1!==(l=e.indexOf(u))){m=new Array(5);do{m[a++]=e.slice(s,l),s=l+f}while(-1!==(l=e.indexOf(u,s)));m[a++]=e.slice(s)}else m=[e],a=1;else m=e,a=e.length;if(a>1)for(l=0;l+1<a;l++)if("**"===m[l]&&"**"===m[l+1])return;var g,h=this.listenerTree;for(l=0;l<a;l++)if(h=h[g=m[l]]||(h[g]={}),l===a-1)return h._listeners?("function"==typeof h._listeners&&(h._listeners=[h._listeners]),t?h._listeners.unshift(n):h._listeners.push(n),!h._listeners.warned&&this._maxListeners>0&&h._listeners.length>this._maxListeners&&(h._listeners.warned=!0,I.call(this,h._listeners.length,g))):h._listeners=n,!0;return!0}function V(e,n,t,a){for(var u,f,m,g,s=P(e),l=s.length,h=e._listeners;l-- >0;)u=e[f=s[l]],m="_listeners"===f?t:t?t.concat(f):[f],g=a||"symbol"==typeof f,h&&n.push(g?m:m.join(this.delimiter)),"object"==typeof u&&V.call(this,u,n,m,g);return n}function tt(e){for(var a,s,l,n=P(e),t=n.length;t-- >0;)(a=e[s=n[t]])&&(l=!0,"_listeners"!==s&&!tt(a)&&delete e[s]);return l}function S(e,n,t){this.emitter=e,this.event=n,this.listener=t}function W(e,n,t){if(!0===t)s=!0;else if(!1===t)a=!0;else{if(!t||"object"!=typeof t)throw TypeError("options should be an object or true");var a=t.async,s=t.promisify,l=t.nextTick,u=t.objectify}if(a||l||s){var f=n,m=n._origin||n;if(l&&!Y)throw Error("process.nextTick is not supported");s===M&&(s="AsyncFunction"===n.constructor.name),n=function(){var h=arguments,g=this,L=this.event;return s?l?Promise.resolve():new Promise(function(y){nt(y)}).then(function(){return g.event=L,f.apply(g,h)}):(l?process.nextTick:nt)(function(){g.event=L,f.apply(g,h)})},n._async=!0,n._origin=m}return[n,u?new S(this,e,n):this]}function _(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,K.call(this,e)}S.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},_.EventEmitter2=_,_.prototype.listenTo=function(e,n,t){if("object"!=typeof e)throw TypeError("target musts be an object");var a=this;function s(l){if("object"!=typeof l)throw TypeError("events must be an object");var m,u=t.reducers,f=lt.call(a,e);m=-1===f?new it(a,e,t):a._observers[f];for(var L,h=P(l),g=h.length,y="function"==typeof u,b=0;b<g;b++)m.subscribe(L=h[b],l[L]||L,y?u:u&&u[L])}return t=J(t,{on:M,off:M,reducers:M},{on:c,off:c,reducers:ht}),rt(n)?s(Z(n)):s("string"==typeof n?Z(n.split(/\s+/)):n),this},_.prototype.stopListeningTo=function(e,n){var t=this._observers;if(!t)return!1;var s,a=t.length,l=!1;if(e&&"object"!=typeof e)throw TypeError("target should be an object");for(;a-- >0;)s=t[a],(!e||s._target===e)&&(s.unsubscribe(n),l=!0);return l},_.prototype.delimiter=".",_.prototype.setMaxListeners=function(e){e!==M&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},_.prototype.getMaxListeners=function(){return this._maxListeners},_.prototype.event="",_.prototype.once=function(e,n,t){return this._once(e,n,!1,t)},_.prototype.prependOnceListener=function(e,n,t){return this._once(e,n,!0,t)},_.prototype._once=function(e,n,t,a){return this._many(e,1,n,t,a)},_.prototype.many=function(e,n,t,a){return this._many(e,n,t,!1,a)},_.prototype.prependMany=function(e,n,t,a){return this._many(e,n,t,!0,a)},_.prototype._many=function(e,n,t,a,s){var l=this;if("function"!=typeof t)throw new Error("many only accepts instances of Function");function u(){return 0==--n&&l.off(e,u),t.apply(this,arguments)}return u._origin=t,this._on(e,u,a,s)},_.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||F.call(this);var n,a,s,l,u,f,e=arguments[0],t=this.wildcard;if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;if(t&&(n=e,"newListener"!==e&&"removeListener"!==e&&"object"==typeof e)){if(s=e.length,$)for(l=0;l<s;l++)if("symbol"==typeof e[l]){f=!0;break}f||(e=e.join(this.delimiter))}var h,m=arguments.length;if(this._all&&this._all.length)for(l=0,s=(h=this._all.slice()).length;l<s;l++)switch(this.event=e,m){case 1:h[l].call(this,e);break;case 2:h[l].call(this,e,arguments[1]);break;case 3:h[l].call(this,e,arguments[1],arguments[2]);break;default:h[l].apply(this,arguments)}if(t)C.call(this,h=[],n,this.listenerTree,0,s);else{if("function"==typeof(h=this._events[e])){switch(this.event=e,m){case 1:h.call(this);break;case 2:h.call(this,arguments[1]);break;case 3:h.call(this,arguments[1],arguments[2]);break;default:for(a=new Array(m-1),u=1;u<m;u++)a[u-1]=arguments[u];h.apply(this,a)}return!0}h&&(h=h.slice())}if(h&&h.length){if(m>3)for(a=new Array(m-1),u=1;u<m;u++)a[u-1]=arguments[u];for(l=0,s=h.length;l<s;l++)switch(this.event=e,m){case 1:h[l].call(this);break;case 2:h[l].call(this,arguments[1]);break;case 3:h[l].call(this,arguments[1],arguments[2]);break;default:h[l].apply(this,a)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},_.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||F.call(this);var t,a,s,l,u,f,e=arguments[0],n=this.wildcard;if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(n&&(t=e,"newListener"!==e&&"removeListener"!==e&&"object"==typeof e)){if(l=e.length,$)for(u=0;u<l;u++)if("symbol"==typeof e[u]){a=!0;break}a||(e=e.join(this.delimiter))}var g,m=[],h=arguments.length;if(this._all)for(u=0,l=this._all.length;u<l;u++)switch(this.event=e,h){case 1:m.push(this._all[u].call(this,e));break;case 2:m.push(this._all[u].call(this,e,arguments[1]));break;case 3:m.push(this._all[u].call(this,e,arguments[1],arguments[2]));break;default:m.push(this._all[u].apply(this,arguments))}if(n?C.call(this,g=[],t,this.listenerTree,0):g=this._events[e],"function"==typeof g)switch(this.event=e,h){case 1:m.push(g.call(this));break;case 2:m.push(g.call(this,arguments[1]));break;case 3:m.push(g.call(this,arguments[1],arguments[2]));break;default:for(s=new Array(h-1),f=1;f<h;f++)s[f-1]=arguments[f];m.push(g.apply(this,s))}else if(g&&g.length){if(g=g.slice(),h>3)for(s=new Array(h-1),f=1;f<h;f++)s[f-1]=arguments[f];for(u=0,l=g.length;u<l;u++)switch(this.event=e,h){case 1:m.push(g[u].call(this));break;case 2:m.push(g[u].call(this,arguments[1]));break;case 3:m.push(g[u].call(this,arguments[1],arguments[2]));break;default:m.push(g[u].apply(this,s))}}else if(!this.ignoreErrors&&!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(m)},_.prototype.on=function(e,n,t){return this._on(e,n,!1,t)},_.prototype.prependListener=function(e,n,t){return this._on(e,n,!0,t)},_.prototype.onAny=function(e){return this._onAny(e,!1)},_.prototype.prependAny=function(e){return this._onAny(e,!0)},_.prototype.addListener=_.prototype.on,_.prototype._onAny=function(e,n){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),n?this._all.unshift(e):this._all.push(e),this},_.prototype._on=function(e,n,t,a){if("function"==typeof e)return this._onAny(e,n),this;if("function"!=typeof n)throw new Error("on only accepts instances of Function");this._events||F.call(this);var l,s=this;return a!==M&&(n=(l=W.call(this,e,n,a))[0],s=l[1]),this._newListener&&this.emit("newListener",e,n),this.wildcard?(ut.call(this,e,n,t),s):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),t?this._events[e].unshift(n):this._events[e].push(n),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,I.call(this,this._events[e].length,e))):this._events[e]=n,s)},_.prototype.off=function(e,n){if("function"!=typeof n)throw new Error("removeListener only takes instances of Function");var t,a=[];if(this.wildcard){var s="string"==typeof e?e.split(this.delimiter):e.slice();if(!(a=C.call(this,null,s,this.listenerTree,0)))return this}else{if(!this._events[e])return this;a.push({_listeners:t=this._events[e]})}for(var l=0;l<a.length;l++){var u=a[l];if(rt(t=u._listeners)){for(var f=-1,m=0,h=t.length;m<h;m++)if(t[m]===n||t[m].listener&&t[m].listener===n||t[m]._origin&&t[m]._origin===n){f=m;break}if(f<0)continue;return this.wildcard?u._listeners.splice(f,1):this._events[e].splice(f,1),0===t.length&&(this.wildcard?delete u._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,n),this}(t===n||t.listener&&t.listener===n||t._origin&&t._origin===n)&&(this.wildcard?delete u._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,n))}return this.listenerTree&&tt(this.listenerTree),this},_.prototype.offAny=function(e){var a,n=0,t=0;if(e&&this._all&&this._all.length>0){for(n=0,t=(a=this._all).length;n<t;n++)if(e===a[n])return a.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(a=this._all,this._removeListener)for(n=0,t=a.length;n<t;n++)this.emit("removeListenerAny",a[n]);this._all=[]}return this},_.prototype.removeListener=_.prototype.off,_.prototype.removeAllListeners=function(e){if(e===M)return!this._events||F.call(this),this;if(this.wildcard){var a,n=C.call(this,null,e,this.listenerTree,0);if(!n)return this;for(a=0;a<n.length;a++)n[a]._listeners=null;this.listenerTree&&tt(this.listenerTree)}else this._events&&(this._events[e]=null);return this},_.prototype.listeners=function(e){var t,a,s,l,u,n=this._events;if(e===M){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!n)return[];for(l=(t=P(n)).length,s=[];l-- >0;)"function"==typeof(a=n[t[l]])?s.push(a):s.push.apply(s,a);return s}if(this.wildcard){if(!(u=this.listenerTree))return[];var f=[],m="string"==typeof e?e.split(this.delimiter):e.slice();return C.call(this,f,m,u,0),f}return n&&(a=n[e])?"function"==typeof a?[a]:a:[]},_.prototype.eventNames=function(e){var n=this._events;return this.wildcard?V.call(this,this.listenerTree,[],null,e):n?P(n):[]},_.prototype.listenerCount=function(e){return this.listeners(e).length},_.prototype.hasListeners=function(e){if(this.wildcard){var n=[],t="string"==typeof e?e.split(this.delimiter):e.slice();return C.call(this,n,t,this.listenerTree,0),n.length>0}var a=this._events,s=this._all;return!!(s&&s.length||a&&(e===M?P(a).length:a[e]))},_.prototype.listenersAny=function(){return this._all?this._all:[]},_.prototype.waitFor=function(e,n){var t=this,a=typeof n;return"number"===a?n={timeout:n}:"function"===a&&(n={filter:n}),st((n=J(n,{timeout:0,filter:M,handleError:!1,Promise,overload:!1},{filter:c,Promise:U})).Promise,function(s,l,u){function f(){var m=n.filter;if(!m||m.apply(t,arguments))if(t.off(e,f),n.handleError){var h=arguments[0];h?l(h):s(j.apply(null,arguments).slice(1))}else s(j.apply(null,arguments))}u(function(){t.off(e,f)}),t._on(e,f,!1)},{timeout:n.timeout,overload:n.overload})};var Q=_.prototype;Object.defineProperties(_,{defaultMaxListeners:{get:function(){return Q._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");Q._maxListeners=e},enumerable:!0},once:{value:function D(e,n,t){return st((t=J(t,{Promise,timeout:0,overload:!1},{Promise:U})).Promise,function(s,l,u){var f;if("function"==typeof e.addEventListener)return f=function(){s(j.apply(null,arguments))},u(function(){e.removeEventListener(n,f)}),void e.addEventListener(n,f,{once:!0});var h,m=function(){h&&e.removeListener("error",h),s(j.apply(null,arguments))};"error"!==n&&(h=function(g){e.removeListener(n,m),l(g)},e.once("error",h)),u(function(){h&&e.removeListener("error",h),e.removeListener(n,m)}),e.once(n,m)},{timeout:t.timeout,overload:t.overload})},writable:!0,configurable:!0}}),Object.defineProperties(Q,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),(A=function(){return _}.call(H,k,H,ct))!==M&&(ct.exports=A)}()}}]);