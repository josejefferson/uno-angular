(self.webpackChunkuno=self.webpackChunkuno||[]).push([[449],{9449:(we,te,y)=>{"use strict";y.r(te),y.d(te,{RoomModule:()=>jt});var R=y(4755),T=y(3263),K=y(2270),le=y(3833);function Y(o,r,t){(function _e(o,r){if(r.has(o))throw new TypeError("Cannot initialize the same private elements twice on an object")})(o,r),r.set(o,t)}function ce(o,r,t){if(!r.has(o))throw new TypeError("attempted to "+t+" private field on non-instance");return r.get(o)}function _(o,r){return function re(o,r){return r.get?r.get.call(o):r.value}(o,ce(o,r,"get"))}function P(o,r,t){return function de(o,r,t){if(r.set)r.set.call(o,t);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=t}}(o,ce(o,r,"set"),t),t}var V=y(31),X=y.n(V),S=new WeakMap,G=new WeakMap;class U extends(X()){constructor(r){super({wildcard:!0}),Y(this,S,{writable:!0,value:void 0}),Y(this,G,{writable:!0,value:void 0}),this.id=r.id,this.name=r.name,this.isOwner=r.isOwner??!1,this.online=r.online??!1,this.score=r.score??0,this.cardsCount=r.cardsCount??0,P(this,S,r.cards??[]),P(this,G,r.socket)}get cards(){return _(this,S)}setCards(r){P(this,S,r),this.cardsCount=_(this,S).length,this.socket?.emit("player:setCards",r)}addCards(r){_(this,S).push(...r),this.cardsCount=_(this,S).length,this.socket?.emit("player:addCards",r)}removeCard(r){_(this,S).splice(r,1),this.cardsCount=_(this,S).length,this.socket?.emit("player:removeCard",r)}get socket(){return _(this,G)}set socket(r){P(this,G,r)}setOnline(r,t){this.online=r,this.disconnectReason=t}}function B(o,r){r.on("*",function(...t){o.emit(this.event,...t)})}function Z(o,r){return o&&(Array.isArray(o)?o.map(t=>Z(t,r)):o instanceof r?o:new r(o))}var he=y(340);const $={EMPTY:[-1,0],"0_0":[0,0],"1_0":[0,1],"2_0":[0,2],"3_0":[0,3],"4_0":[0,4],"5_0":[0,5],"6_0":[0,6],"7_0":[0,7],"8_0":[0,8],"9_0":[0,9],SKIP_0:[0,10],REVERSE_0:[0,11],DRAW2_0:[0,12],"0_1":[1,0],"1_1":[1,1],"2_1":[1,2],"3_1":[1,3],"4_1":[1,4],"5_1":[1,5],"6_1":[1,6],"7_1":[1,7],"8_1":[1,8],"9_1":[1,9],SKIP_1:[1,10],REVERSE_1:[1,11],DRAW2_1:[1,12],"0_2":[3,0],"1_2":[3,1],"2_2":[3,2],"3_2":[3,3],"4_2":[3,4],"5_2":[3,5],"6_2":[3,6],"7_2":[3,7],"8_2":[3,8],"9_2":[3,9],SKIP_2:[3,10],REVERSE_2:[3,11],DRAW2_2:[3,12],"0_3":[2,0],"1_3":[2,1],"2_3":[2,2],"3_3":[2,3],"4_3":[2,4],"5_3":[2,5],"6_3":[2,6],"7_3":[2,7],"8_3":[2,8],"9_3":[2,9],SKIP_3:[2,10],REVERSE_3:[2,11],DRAW2_3:[2,12],"WILD_-1":[0,13],"WILDDRAW4_-1":[4,13]};for(const o in $)$[o][0]*=99.8,$[o][1]*=69.7;var N=new WeakMap,z=new WeakMap,v=new WeakMap,D=new WeakMap;class J extends(X()){get descarte(){return _(this,z)}get baralho(){return _(this,v)}get playerCards(){return _(this,D)}get topo(){return _(this,z)[0]}get jogadorAtual(){return this.players[this.jogador]}constructor(r={}){super({wildcard:!0}),Y(this,N,{writable:!0,value:void 0}),Y(this,z,{writable:!0,value:void 0}),Y(this,v,{writable:!0,value:void 0}),Y(this,D,{writable:!0,value:void 0}),this.seed=r.seed??Math.random(),P(this,N,he(this.seed.toString())),P(this,z,r.descarteUltimaCarta?[r.descarteUltimaCarta]:[]),this.descarteUltimaCarta=r.descarteUltimaCarta??null,P(this,v,this.embaralhar()),this.baralhoCount=r.baralho??_(this,v).length,P(this,D,r.players?.map(()=>[])??[]),this.playerCardsCount=r.playerCardsCount??r.players?.map(()=>0)??[],this.players=Z(r.players,U)??[],this.direcao=r.direcao??1,this.jogador=r.jogador??Math.floor(_(this,N).call(this)*this.players.length),this.comprou=!1}comeca(){this.distribuir(),this.tirarPrimeiraCarta()}start(r){this.constructor({seed:r})}embaralhar(){let r=[{id:0,icon:"0",color:0},{id:1,icon:"1",color:0},{id:2,icon:"1",color:0},{id:3,icon:"2",color:0},{id:4,icon:"2",color:0},{id:5,icon:"3",color:0},{id:6,icon:"3",color:0},{id:7,icon:"4",color:0},{id:8,icon:"4",color:0},{id:9,icon:"5",color:0},{id:10,icon:"5",color:0},{id:11,icon:"6",color:0},{id:12,icon:"6",color:0},{id:13,icon:"7",color:0},{id:14,icon:"7",color:0},{id:15,icon:"8",color:0},{id:16,icon:"8",color:0},{id:17,icon:"9",color:0},{id:18,icon:"9",color:0},{id:19,icon:"REVERSE",color:0},{id:20,icon:"REVERSE",color:0},{id:21,icon:"SKIP",color:0},{id:22,icon:"SKIP",color:0},{id:23,icon:"DRAW2",color:0},{id:24,icon:"DRAW2",color:0},{id:25,icon:"0",color:1},{id:26,icon:"1",color:1},{id:27,icon:"1",color:1},{id:28,icon:"2",color:1},{id:29,icon:"2",color:1},{id:30,icon:"3",color:1},{id:31,icon:"3",color:1},{id:32,icon:"4",color:1},{id:33,icon:"4",color:1},{id:34,icon:"5",color:1},{id:35,icon:"5",color:1},{id:36,icon:"6",color:1},{id:37,icon:"6",color:1},{id:38,icon:"7",color:1},{id:39,icon:"7",color:1},{id:40,icon:"8",color:1},{id:41,icon:"8",color:1},{id:42,icon:"9",color:1},{id:43,icon:"9",color:1},{id:44,icon:"REVERSE",color:1},{id:45,icon:"REVERSE",color:1},{id:46,icon:"SKIP",color:1},{id:47,icon:"SKIP",color:1},{id:48,icon:"DRAW2",color:1},{id:49,icon:"DRAW2",color:1},{id:50,icon:"0",color:2},{id:51,icon:"1",color:2},{id:52,icon:"1",color:2},{id:53,icon:"2",color:2},{id:54,icon:"2",color:2},{id:55,icon:"3",color:2},{id:56,icon:"3",color:2},{id:57,icon:"4",color:2},{id:58,icon:"4",color:2},{id:59,icon:"5",color:2},{id:60,icon:"5",color:2},{id:61,icon:"6",color:2},{id:62,icon:"6",color:2},{id:63,icon:"7",color:2},{id:64,icon:"7",color:2},{id:65,icon:"8",color:2},{id:66,icon:"8",color:2},{id:67,icon:"9",color:2},{id:68,icon:"9",color:2},{id:69,icon:"REVERSE",color:2},{id:70,icon:"REVERSE",color:2},{id:71,icon:"SKIP",color:2},{id:72,icon:"SKIP",color:2},{id:73,icon:"DRAW2",color:2},{id:74,icon:"DRAW2",color:2},{id:75,icon:"0",color:3},{id:76,icon:"1",color:3},{id:77,icon:"1",color:3},{id:78,icon:"2",color:3},{id:79,icon:"2",color:3},{id:80,icon:"3",color:3},{id:81,icon:"3",color:3},{id:82,icon:"4",color:3},{id:83,icon:"4",color:3},{id:84,icon:"5",color:3},{id:85,icon:"5",color:3},{id:86,icon:"6",color:3},{id:87,icon:"6",color:3},{id:88,icon:"7",color:3},{id:89,icon:"7",color:3},{id:90,icon:"8",color:3},{id:91,icon:"8",color:3},{id:92,icon:"9",color:3},{id:93,icon:"9",color:3},{id:94,icon:"REVERSE",color:3},{id:95,icon:"REVERSE",color:3},{id:96,icon:"SKIP",color:3},{id:97,icon:"SKIP",color:3},{id:98,icon:"DRAW2",color:3},{id:99,icon:"DRAW2",color:3},{id:100,icon:"WILD",color:-1},{id:101,icon:"WILD",color:-1},{id:102,icon:"WILD",color:-1},{id:103,icon:"WILD",color:-1},{id:104,icon:"WILDDRAW4",color:-1},{id:105,icon:"WILDDRAW4",color:-1},{id:106,icon:"WILDDRAW4",color:-1},{id:107,icon:"WILDDRAW4",color:-1}];return r=r.map(t=>({...t})),r.sort(()=>_(this,N).call(this)-_(this,N).call(this)),r}distribuir(){for(const r in this.players){const t=[];for(let s=0;s<7;s++)t.push(this.tirarCartaDoBaralho());this.setPlayerCards(+r,t),this.setPlayerCardsLength(+r,t.length)}}setPlayerCards(r,t){_(this,D)[r]=[...t],this.players[r].setCards([...t])}addPlayerCards(r,t){_(this,D)[r].push(...t),this.players[r].addCards(t)}removePlayerCard(r,t){_(this,D)[r].splice(t,1),this.players[r].removeCard(t)}setPlayerCardsLength(r,t){this.playerCardsCount[r]=t,this.emit("game:setPlayerCardsLength",r,t)}tirarPrimeiraCarta(){this.descartar(this.tirarCartaDoBaralho())}tirarCartaDoBaralho(){_(this,v).length<=1&&(this.emit("warning","O baralho foi reposto"),this.reporBaralho()),1===_(this,v).length&&this.emit("warning","O baralho acabou");const r=_(this,v).pop();return this.baralhoCount--,this.emit("game:tirarCartaDoBaralho"),r}setBaralhoCount(r){this.baralhoCount=r,this.emit("game:setBaralhoCount",r)}getMyCards(r){if("number"==typeof r)return _(this,D)[r];const t=this.players.findIndex(s=>s.id===r.id);return _(this,D)[t]}descartar(r){_(this,z).unshift(r),this.descarteUltimaCarta=r,this.emit("game:descartar",r)}jogar(r,t){t=t&&Number(t);const s=_(this,D)[this.jogador][r];if(!s)throw new Error("Carta inv\xe1lida");if("number"==typeof t&&(s.wildColor=t),!this.podeJogar(s))throw new Error(`Voc\xea n\xe3o pode jogar esta carta: COR: ${s.color}, \xcdCONE: ${s.icon}`);if(this.descartar(s),this.removePlayerCard(this.jogador,r),this.setPlayerCardsLength(this.jogador,_(this,D)[this.jogador].length),_(this,D)[this.jogador].length<=0)return this.emit("message",`${this.players[this.jogador]?.name} ganhou o jogo!`),void this.endGame(this.jogador);switch(s.icon){case"REVERSE":this.inverter();break;case"SKIP":this.pular();break;case"DRAW2":this.compra2();break;case"WILDDRAW4":this.compra4()}this.proximoJogador()}proximoJogador(){this.comprou=!1;let r=this.jogador+this.direcao;r>=this.players.length&&(r=0),r<0&&(r=this.players.length-1),this.setJogador(r)}setJogador(r){this.jogador=r,this.emit("game:setJogador",r)}podeJogar(r){return-1===this.topo?.color&&void 0===this.topo?.wildColor||-1===this.topo?.color&&this.topo?.wildColor===r.color||this.topo?.color===r.color||this.topo?.icon===r.icon||-1===r.color}comprar(r=!1){if(!r&&this.comprou)throw new Error("Voc\xea j\xe1 comprou, agora passe a vez");this.comprou=!0;const t=this.tirarCartaDoBaralho();t&&(this.addPlayerCards(this.jogador,[t]),this.setPlayerCardsLength(this.jogador,_(this,D)[this.jogador].length))}reporBaralho(){const r=_(this,z).splice(1);r.sort(()=>_(this,N).call(this)-_(this,N).call(this)),r.forEach(t=>delete t.wildColor),_(this,v).push(...r),this.setBaralhoCount(_(this,v).length)}passar(){if(_(this,v).length&&!this.comprou)throw new Error("Voc\xea n\xe3o comprou uma carta, ent\xe3o n\xe3o pode passar");this.proximoJogador()}setPlayerOnline(r,t,s){const p=this.players.findIndex(w=>w.id===r);-1!==p&&(this.players[p].setOnline(t,s),this.emit("game:setPlayerOnline",r,t,s))}endGame(r){this.emit("endGame",r)}pular(){this.proximoJogador(),this.jogadorAtual.socket?.emit("message","Bloqueado")}inverter(){this.direcao*=-1,this.emit("game:inverter"),this.emit("message","Inverteu")}compra2(){this.proximoJogador();for(let r=0;r<2;r++)this.comprar(!0);this.jogadorAtual.socket?.emit("message","Comprou +2")}compra4(){this.proximoJogador();for(let r=0;r<4;r++)this.comprar(!0);this.jogadorAtual.socket?.emit("message","Comprou +4")}}class Le extends(X()){constructor(r){super({wildcard:!0}),this.id=r.id??function ue(){return Math.floor(9999999*Math.random()).toString()}(),this.isPublic=r.isPublic??!1,this.started=r.started??!1,this.owner=r.owner??null,this.players=Z(r.players,U)??[],this.currentGame=Z(r.currentGame??null,J),this.currentGameIndex=r.currentGameIndex??-1,this.currentGame&&B(this,this.currentGame)}joinGame(r){if(this.players.some(s=>s.id===r.id))return;const t=Z(r,U);this.players.push(t),this.emit("room:joinGame",r)}setPlayerOnline(r,t,s){const p=this.players.find(w=>w.id===r.id);p&&(p.setOnline(t,s),this.emit("room:setPlayerOnline",r,t,s),this.currentGame?.setPlayerOnline(r.id,t,s))}startGame(r){this.currentGame=Z(r,J)??new J({players:this.players}),this.emit("room:startGame",this.currentGame),B(this,this.currentGame),typeof window>"u"&&this.currentGame.comeca(),this.started=!0,this.currentGameIndex++,this.currentGame.on("endGame",t=>{this.endGame(t)})}endGame(r){this.currentGame=null,this.started=!1,this.players[r].score+=1,this.emit("room:endGame",r)}}var n=y(567),i=y(2340),e=y(5206),a=y(2018),l=y(1594);function c(o,r){1&o&&(e.TgZ(0,"div",6),e._uU(1,"Esta sala n\xe3o existe"),e.qZA())}function u(o,r){1&o&&(e.TgZ(0,"div",6),e._uU(1,"C\xf3digo de sala inv\xe1lido"),e.qZA())}function f(o,r){if(1&o&&(e.TgZ(0,"div",6),e._uU(1," Ocorreu um erro ao carregar a sala: "),e.TgZ(2,"i"),e._uU(3),e.qZA()()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.err)}}let h=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-room-error"]],inputs:{err:"err"},decls:8,vars:3,consts:[[1,"h-[100vh]","flex","items-center","justify-center","text-center","p-3","flex-col"],[3,"ngSwitch"],[1,"text-9xl","fas","fa-door-open"],["class","text-6xl mt-3",4,"ngSwitchCase"],["class","text-6xl mt-3",4,"ngSwitchDefault"],["routerLink","/rooms",1,"btn","btn-outline","btn-info","mt-6"],[1,"text-6xl","mt-3"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.YNc(3,c,2,0,"div",3),e.YNc(4,u,2,0,"div",3),e.YNc(5,f,4,1,"div",4),e.qZA(),e.TgZ(6,"button",5),e._uU(7,"Retornar \xe0s salas"),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngSwitch",s.err),e.xp6(2),e.Q6J("ngSwitchCase","Esta sala n\xe3o existe"),e.xp6(1),e.Q6J("ngSwitchCase","Invalid namespace"))},dependencies:[R.RF,R.n9,R.ED,K.rH]}),o})();var m=y(8394);function g(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.startGame())}),e._uU(1,"Iniciar partida"),e.qZA()}}function O(o,r){1&o&&(e.TgZ(0,"button",8),e._uU(1,"Iniciando..."),e.qZA())}function x(o,r){if(1&o&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.score)}}function E(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,x,2,1,"div",9),e.TgZ(2,"div",10),e._uU(3),e.qZA(),e._UZ(4,"img",11),e.TgZ(5,"div",12),e._uU(6),e.qZA()()),2&o){const t=r.$implicit,s=e.oxw();e.Gre("player bg-",s.seedColor(t.id),"-900 animate__animated animate__bounceIn"),e.ekj("owner",t.id===s.room.owner)("opacity-25",!t.online),e.xp6(1),e.Q6J("ngIf",t.score),e.xp6(2),e.Oqu(t.name||"(Sem nome)"),e.xp6(1),e.MGl("src","https://api.dicebear.com/6.x/avataaars/svg?seed=",t.id,"",e.LSH),e.xp6(2),e.Oqu(t.place)}}let C=(()=>{class o{constructor(){this.seedColor=m.E,this.starting=!1}startGame(){this.starting=!0,this.socket.timeout(5e3).emit("room:startGame",(t,s,p)=>{if(this.starting=!1,t||s)return alert(t?.message||s)})}get players(){const t=[...this.room.players].sort((b,k)=>k.score-b.score),s=[...new Set(t.map(b=>b.score).filter(b=>b>0))],p={1:"\u{1f947}",2:"\u{1f948}",3:"\u{1f949}"};return t.map(b=>{const k=s.indexOf(b.score)+1;return b.place=p[k>3||k<1?null:k]||"",b})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-lobby"]],inputs:{room:"room",me:"me",socket:"socket"},decls:8,vars:4,consts:[[1,"container","max-w-6xl","mx-auto","px-5","py-4"],[1,"logo-style","mb-4","text-center"],[1,"text-center","my-5"],["class","btn btn-success",3,"click",4,"ngIf"],["class","btn","disabled","",4,"ngIf"],[1,"players"],[3,"class","owner","opacity-25",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],["disabled","",1,"btn"],["class","score",4,"ngIf"],[1,"player-name"],["alt","Avatar",1,"avatar","block",3,"src"],[1,"player-place"],[1,"score"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,g,2,0,"button",3),e.YNc(5,O,2,0,"button",4),e.qZA(),e.TgZ(6,"div",5),e.YNc(7,E,7,11,"div",6),e.qZA()()),2&t&&(e.xp6(2),e.hij("Sala #",s.room.id,""),e.xp6(2),e.Q6J("ngIf",!s.starting),e.xp6(1),e.Q6J("ngIf",s.starting),e.xp6(2),e.Q6J("ngForOf",s.players))},dependencies:[R.sg,R.O5],styles:[".players[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:1rem}@media (min-width: 640px){.players[_ngcontent-%COMP%]{grid-template-columns:repeat(3,minmax(0,1fr))}}@media (min-width: 768px){.players[_ngcontent-%COMP%]{grid-template-columns:repeat(4,minmax(0,1fr))}}@media (min-width: 1024px){.players[_ngcontent-%COMP%]{grid-template-columns:repeat(5,minmax(0,1fr))}}.players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]{border-width:6px;--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity));padding:.75rem;padding-bottom:0;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity));--tw-shadow: 4px 4px black;--tw-shadow-colored: 4px 4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.players[_ngcontent-%COMP%]   .player.owner[_ngcontent-%COMP%]{border-radius:.5rem;--tw-border-opacity: 1;border-color:rgb(234 179 8 / var(--tw-border-opacity))}.players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .player-name[_ngcontent-%COMP%]{margin-bottom:.75rem;text-align:center;font-size:1.5rem;line-height:2rem}.players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex;height:1.75rem;width:1.75rem;--tw-translate-x: 50%;--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));align-items:center;justify-content:center;border-radius:9999px;--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity));--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .player-place[_ngcontent-%COMP%]{position:absolute;bottom:.25rem;right:.25rem;font-size:1.5rem;line-height:2rem}"]}),o})();function M(o,r,t,s,p,w,b){try{var k=o[w](b),I=k.value}catch(W){return void t(W)}k.done?r(I):Promise.resolve(I).then(s,p)}function j(o){return Array.isArray(o)?o:[o]}var je=y(7579),Ge=y(5121),Ne=y(7272),We=y(9751),Ze=y(5698),Ye=y(9300),ze=y(727);class Be extends ze.w0{constructor(r,t){super()}schedule(r,t=0){return this}}const ge={setInterval(o,r,...t){const{delegate:s}=ge;return s?.setInterval?s.setInterval(o,r,...t):setInterval(o,r,...t)},clearInterval(o){const{delegate:r}=ge;return(r?.clearInterval||clearInterval)(o)},delegate:void 0};var Je=y(8737);const Pe={now:()=>(Pe.delegate||Date).now(),delegate:void 0};class se{constructor(r,t=se.now){this.schedulerActionCtor=r,this.now=t}schedule(r,t=0,s){return new this.schedulerActionCtor(this,r).schedule(s,t)}}se.now=Pe.now;const qe=new class Qe extends se{constructor(r,t=se.now){super(r,t),this.actions=[],this._active=!1}flush(r){const{actions:t}=this;if(this._active)return void t.push(r);let s;this._active=!0;do{if(s=r.execute(r.state,r.delay))break}while(r=t.shift());if(this._active=!1,s){for(;r=t.shift();)r.unsubscribe();throw s}}}(class Fe extends Be{constructor(r,t){super(r,t),this.scheduler=r,this.work=t,this.pending=!1}schedule(r,t=0){var s;if(this.closed)return this;this.state=r;const p=this.id,w=this.scheduler;return null!=p&&(this.id=this.recycleAsyncId(w,p,t)),this.pending=!0,this.delay=t,this.id=null!==(s=this.id)&&void 0!==s?s:this.requestAsyncId(w,this.id,t),this}requestAsyncId(r,t,s=0){return ge.setInterval(r.flush.bind(r,this),s)}recycleAsyncId(r,t,s=0){if(null!=s&&this.delay===s&&!1===this.pending)return t;null!=t&&ge.clearInterval(t)}execute(r,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(r,t);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(r,t){let p,s=!1;try{this.work(r)}catch(w){s=!0,p=w||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),p}unsubscribe(){if(!this.closed){const{id:r,scheduler:t}=this,{actions:s}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Je.P)(s,this),null!=r&&(this.id=this.recycleAsyncId(t,r,null)),this.delay=null,super.unsubscribe()}}});var Oe=y(4482),Me=y(5403),Re=y(4004),Ve=y(8675),Xe=y(8421),$e=y(5032);function He(o){return(0,Oe.e)((r,t)=>{(0,Xe.Xf)(o).subscribe((0,Me.x)(t,()=>t.complete(),$e.Z)),!t.closed&&r.subscribe(t)})}let be;try{be=typeof Intl<"u"&&Intl.v8BreakIterator}catch{be=!1}let et=(()=>{class o{constructor(t){this._platformId=t,this.isBrowser=this._platformId?(0,R.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!be)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(e.Lbi))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Ae=new Set;let Q,nt=(()=>{class o{constructor(t,s){this._platform=t,this._nonce=s,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):it}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function ot(o,r){if(!Ae.has(o))try{Q||(Q=document.createElement("style"),r&&(Q.nonce=r),Q.setAttribute("type","text/css"),document.head.appendChild(Q)),Q.sheet&&(Q.sheet.insertRule(`@media ${o} {body{ }}`,0),Ae.add(o))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(et),e.LFG(e.Ojb,8))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function it(o){return{matches:"all"===o||""===o,media:o,addListener:()=>{},removeListener:()=>{}}}let Ie=(()=>{class o{constructor(t,s){this._mediaMatcher=t,this._zone=s,this._queries=new Map,this._destroySubject=new je.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return De(j(t)).some(p=>this._registerQuery(p).mql.matches)}observe(t){const p=De(j(t)).map(b=>this._registerQuery(b).observable);let w=(0,Ge.a)(p);return w=(0,Ne.z)(w.pipe((0,Ze.q)(1)),w.pipe(function Ue(o){return(0,Ye.h)((r,t)=>o<=t)}(1),function Ke(o,r=qe){return(0,Oe.e)((t,s)=>{let p=null,w=null,b=null;const k=()=>{if(p){p.unsubscribe(),p=null;const W=w;w=null,s.next(W)}};function I(){const W=b+o,Se=r.now();if(Se<W)return p=this.schedule(void 0,W-Se),void s.add(p);k()}t.subscribe((0,Me.x)(s,W=>{w=W,b=r.now(),p||(p=r.schedule(I,o),s.add(p))},()=>{k(),s.complete()},void 0,()=>{w=p=null}))})}(0))),w.pipe((0,Re.U)(b=>{const k={matches:!1,breakpoints:{}};return b.forEach(({matches:I,query:W})=>{k.matches=k.matches||I,k.breakpoints[W]=I}),k}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const s=this._mediaMatcher.matchMedia(t),w={observable:new We.y(b=>{const k=I=>this._zone.run(()=>b.next(I));return s.addListener(k),()=>{s.removeListener(k)}}).pipe((0,Ve.O)(s),(0,Re.U)(({matches:b})=>({query:t,matches:b})),He(this._destroySubject)),mql:s};return this._queries.set(t,w),w}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(nt),e.LFG(e.R0b))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function De(o){return o.map(r=>r.split(",")).reduce((r,t)=>r.concat(t)).map(r=>r.trim())}const q_Small="(min-width: 600px) and (max-width: 959.98px)",q_Medium="(min-width: 960px) and (max-width: 1279.98px)",q_Large="(min-width: 1280px) and (max-width: 1919.98px)";var Ee=y(4797);function st(o,r){1&o&&(e.TgZ(0,"div",8),e._UZ(1,"uno-card",9),e.qZA()),2&o&&(e.xp6(1),e.Q6J("@zoom",void 0)("back",!0)("size",.5))}let at=(()=>{class o{constructor(){this.vezDele=!1}cards(){return Array(this.quantidadeCartas||0).fill(0)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-player-slot"]],inputs:{player:"player",vezDele:"vezDele",quantidadeCartas:"quantidadeCartas"},decls:9,vars:12,consts:[[1,"slot","flex-1"],[1,"cards-container"],[1,"cards"],["class","uno-card-container",4,"ngFor","ngForOf"],[1,"avatar-container","h-0","md:h-auto"],["alt","Avatar",1,"avatar","w-0","md:w-[50px]","xl:w-[100px]",3,"src"],[1,"name-container"],[1,"name"],[1,"uno-card-container"],[3,"back","size"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,st,2,3,"div",3),e.qZA()(),e.TgZ(4,"div",4),e._UZ(5,"img",5),e.qZA(),e.TgZ(6,"div",6)(7,"div",7),e._uU(8),e.qZA()()()),2&t&&(e.ekj("empty",!s.player)("offline",!(null!=s.player&&s.player.online)),e.xp6(3),e.Q6J("ngForOf",s.cards()),e.xp6(2),e.ekj("vez",s.vezDele),e.MGl("src","https://api.dicebear.com/6.x/avataaars/svg?seed=",null==s.player?null:s.player.id,"",e.LSH),e.xp6(2),e.ekj("vez",s.vezDele),e.xp6(1),e.AsE(" ",(null==s.player?null:s.player.name)||"(Sem nome)"," ",null!=s.player&&s.player.online?"":"(offline)"," "))},dependencies:[R.sg,Ee.s],styles:[".uno-card-container[_ngcontent-%COMP%]{width:2px}.offline[_ngcontent-%COMP%]{opacity:.6}.vez[_ngcontent-%COMP%]{color:#ff0;font-size:20px}.slot[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;text-align:center}.slot.empty[_ngcontent-%COMP%]{display:none}.cards-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.name-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px}.cards[_ngcontent-%COMP%]{position:absolute;display:flex;padding-right:16px}.cards[_ngcontent-%COMP%]   .uno-card-container[_ngcontent-%COMP%]{width:20px!important}"],data:{animation:[n.w]}}),o})();const lt=function(){return{id:0,color:0,icon:""}},ct=function(){return{id:0,color:1,icon:""}},dt=function(){return{id:0,color:2,icon:""}},ut=function(){return{id:0,color:3,icon:""}};function ht(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"h1",2),e._uU(2,"Selecione uma cor"),e.qZA(),e.TgZ(3,"div",3)(4,"uno-card",4),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.s(0))}),e.qZA(),e.TgZ(5,"uno-card",5),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.s(1))}),e.qZA(),e.TgZ(6,"uno-card",6),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.s(2))}),e.qZA(),e.TgZ(7,"uno-card",7),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.s(3))}),e.qZA()(),e.TgZ(8,"button",8),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.s(!1))}),e._uU(9,"Cancelar"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("@fade",void 0),e.xp6(4),e.Q6J("card",e.DdM(9,lt))("size",t.size),e.xp6(1),e.Q6J("card",e.DdM(10,ct))("size",t.size),e.xp6(1),e.Q6J("card",e.DdM(11,dt))("size",t.size),e.xp6(1),e.Q6J("card",e.DdM(12,ut))("size",t.size)}}let mt=(()=>{class o{constructor(t){this.breakpointObserver=t,this.size=1.5,this.breakpoint$=this.breakpointObserver.observe([q_Large,q_Medium,q_Small,"(min-width: 500px)"])}ngOnInit(){this.breakpoint$.subscribe(()=>this.breakpointChanged())}breakpointChanged(){this.size=this.breakpointObserver.isMatched(q_Small)?1.5:.8}s(t){this.select?.(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Ie))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-select-color"]],inputs:{select:"select"},decls:1,vars:1,consts:[["class","bg text-center p-5",4,"ngIf"],[1,"bg","text-center","p-5"],[1,"text-5xl","mb-10"],[1,"flex","gap-3","mb-10","flex-wrap","justify-center"],[1,"uno-card","animate__animated","animate__flipInY",2,"animation-delay","0s",3,"card","size","click"],[1,"uno-card","animate__animated","animate__flipInY",2,"animation-delay","0.1s",3,"card","size","click"],[1,"uno-card","animate__animated","animate__flipInY",2,"animation-delay","0.2s",3,"card","size","click"],[1,"uno-card","animate__animated","animate__flipInY",2,"animation-delay","0.3s",3,"card","size","click"],[1,"btn","btn-error","btn-outline",3,"click"]],template:function(t,s){1&t&&e.YNc(0,ht,10,13,"div",0),2&t&&e.Q6J("ngIf",!!s.select)},dependencies:[R.O5,Ee.s],styles:[".bg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:1;display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;background-color:rgb(0 0 0 / var(--tw-bg-opacity));--tw-bg-opacity: .9 }.uno-card[_ngcontent-%COMP%]{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));cursor:pointer;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.uno-card[_ngcontent-%COMP%]:hover{--tw-scale-x: 1.1 !important;--tw-scale-y: 1.1 !important;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))!important}.uno-card[_ngcontent-%COMP%]:active{--tw-scale-x: .9 !important;--tw-scale-y: .9 !important;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))!important}"],data:{animation:[(0,n.q)()]}}),o})();const ft=["myCards"];function pt(o,r){if(1&o&&e._UZ(0,"app-player-slot",26),2&o){const t=e.oxw(2);e.Q6J("player",t.getPlayer(1))("vezDele",t.getVezDele(1))("quantidadeCartas",t.getQuantidadeCartas(1))}}function gt(o,r){if(1&o&&e._UZ(0,"app-player-slot",26),2&o){const t=e.oxw(2);e.Q6J("player",t.getPlayer(0))("vezDele",t.getVezDele(0))("quantidadeCartas",t.getQuantidadeCartas(0))}}function vt(o,r){if(1&o&&e._UZ(0,"app-player-slot",26),2&o){const t=e.oxw(2);e.Q6J("player",t.getPlayer(2))("vezDele",t.getVezDele(2))("quantidadeCartas",t.getQuantidadeCartas(2))}}function wt(o,r){if(1&o&&e._UZ(0,"app-player-slot",26),2&o){const t=e.oxw(2);e.Q6J("player",t.getPlayer(3))("vezDele",t.getVezDele(3))("quantidadeCartas",t.getQuantidadeCartas(3))}}function _t(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const p=e.oxw(2);return e.KtG(p.passar())}),e._uU(1," PASSAR "),e.qZA()}2&o&&e.Q6J("@fade",void 0)}function yt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",28),e.NdJ("click",function(){const p=e.CHM(t),w=p.index,b=p.$implicit,k=e.oxw(2);return e.KtG(k.jogar(w,b))}),e._UZ(1,"uno-card",13),e.qZA()}if(2&o){const t=r.$implicit,s=e.oxw(2);e.ekj("naoPode",!s.game.podeJogar(t)),e.xp6(1),e.Q6J("@zoom",void 0)("card",t)("size",s.myCardSize)}}function bt(o,r){if(1&o&&e._UZ(0,"app-player-slot",26),2&o){const t=e.oxw(2);e.Q6J("player",t.getPlayer(4))("vezDele",t.getVezDele(4))("quantidadeCartas",t.getQuantidadeCartas(4))}}function xt(o,r){if(1&o&&e._UZ(0,"app-player-slot",26),2&o){const t=e.oxw(2);e.Q6J("player",t.getPlayer(5))("vezDele",t.getVezDele(5))("quantidadeCartas",t.getQuantidadeCartas(5))}}const Et=function(){return[]};function Ct(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"main",2)(1,"div",3),e.YNc(2,pt,1,3,"app-player-slot",4),e.YNc(3,gt,1,3,"app-player-slot",4),e.qZA(),e.TgZ(4,"div",5)(5,"div",6),e.YNc(6,vt,1,3,"app-player-slot",4),e.YNc(7,wt,1,3,"app-player-slot",4),e.qZA(),e.TgZ(8,"div",7)(9,"div",8)(10,"div",9)(11,"button",10),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.fullscreen())}),e._UZ(12,"i",11),e.qZA(),e.TgZ(13,"h1",12),e._uU(14),e.qZA(),e._UZ(15,"uno-card",13),e.TgZ(16,"div",14),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(!p.game.comprou&&p.comprar())}),e._UZ(17,"uno-card",15)(18,"uno-card",16),e.qZA(),e._UZ(19,"img",17),e.YNc(20,_t,2,1,"button",18),e.qZA()()(),e.TgZ(21,"div",19)(22,"div",20)(23,"div",21)(24,"div",22,23),e.YNc(26,yt,2,5,"div",24),e.qZA()()()()(),e.TgZ(27,"div",25),e.YNc(28,bt,1,3,"app-player-slot",4),e.YNc(29,xt,1,3,"app-player-slot",4),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.getPlayer(1)),e.xp6(1),e.Q6J("ngIf",t.getPlayer(0)),e.xp6(3),e.Q6J("ngIf",t.getPlayer(2)),e.xp6(1),e.Q6J("ngIf",t.getPlayer(3)),e.xp6(7),e.hij(" \xc9 a ",t.game.jogadorAtual.id===t.me.id?"sua vez":"vez de "+(t.game.jogadorAtual.name||"(Sem nome)")," "),e.xp6(1),e.Q6J("card",t.game.descarteUltimaCarta)("size",t.centerCardSize),e.xp6(1),e.ekj("disabled",t.game.comprou),e.Q6J("hidden",t.game.baralhoCount<=0),e.xp6(1),e.Q6J("back",!0)("hidden",1===t.game.baralhoCount),e.xp6(1),e.Q6J("back",!0),e.xp6(1),e.ekj("inverted",-1===t.game.direcao),e.xp6(1),e.Q6J("ngIf",t.game.jogadorAtual.id===t.me.id&&t.game.comprou),e.xp6(3),e.ekj("disabled",t.game.jogadorAtual.id!==t.me.id),e.xp6(3),e.Q6J("ngForOf",t.me.cards||e.DdM(22,Et))("ngForTrackBy",t.trackById),e.xp6(2),e.Q6J("ngIf",t.getPlayer(4)),e.xp6(1),e.Q6J("ngIf",t.getPlayer(5))}}const kt=[[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,0,-1,-1,-1],[-1,-1,0,1,-1,-1],[-1,0,1,-1,2,-1],[-1,0,1,2,3,-1],[0,1,2,-1,3,4],[0,1,2,3,4,5]];let Lt=(()=>{class o{breakpointChanged(){this.breakpointObserver.isMatched("(min-width: 641px)")?(this.centerCardSize=1.5,this.myCardSize=1):(this.centerCardSize=1,this.myCardSize=.7)}constructor(t){this.breakpointObserver=t,this.centerCardSize=1.5,this.myCardSize=1,this.breakpoint$=this.breakpointObserver.observe([q_Large,q_Medium,q_Small,"(min-width: 640px)"])}ngOnInit(){this.breakpoint$.subscribe(()=>this.breakpointChanged());const t=this.players()?.length>7?7:this.players()?.length;this.playerMap=kt[t??0],this.socket.on("player:addCards",this.onAddCards.bind(this)),window.room=this.room,window.me=this.me,window.game=this}ngOnDestroy(){this.socket.off("player:addCards",[this.onAddCards.bind(this)])}onAddCards(){setTimeout(()=>{this.myCards?.nativeElement.scrollTo({left:this.myCards.nativeElement.scrollWidth,behavior:"smooth"})},300)}jogar(t,s){var p=this;return function oe(o){return function(){var r=this,t=arguments;return new Promise(function(s,p){var w=o.apply(r,t);function b(I){M(w,s,p,b,k,"next",I)}function k(I){M(w,s,p,b,k,"throw",I)}b(void 0)})}}(function*(){if(-1===s.color){const w=yield new Promise(b=>{p.selectColor=b});if(p.selectColor=void 0,"number"!=typeof w)return;p.socket.emit("game:jogar",t,w)}else p.socket.emit("game:jogar",t)})()}comprar(){this.socket.emit("game:comprar"),this.game.comprou=!0,this.socket.on("game:setJogador",()=>{this.game.comprou=!1})}passar(){this.socket.emit("game:passar")}getPlayer(t){return this.players()[this.playerMap[t]]?.player}getVezDele(t){return this.game.jogadorAtual.id===this.players()[this.playerMap[t]]?.player?.id}getQuantidadeCartas(t){const s=this.players()[this.playerMap[t]]?.index??-1;return this.game.playerCardsCount[s]}players(t=!0){let s=this.game?.players.map((p,w)=>({player:p,index:w}));return t&&(s=s.filter(p=>p.player.id!==this.me.id)),s}trackById(t,s){return s.id}fullscreen(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Ie))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-game"]],viewQuery:function(t,s){if(1&t&&e.Gf(ft,5),2&t){let p;e.iGM(p=e.CRH())&&(s.myCards=p.first)}},inputs:{room:"room",me:"me",socket:"socket",game:"game"},decls:2,vars:2,consts:[["class","game-container flex flex-row","style","height: 100vh",4,"ngIf"],[3,"select"],[1,"game-container","flex","flex-row",2,"height","100vh"],[1,"slots-left","flex","flex-col"],["class","flex-1",3,"player","vezDele","quantidadeCartas",4,"ngIf"],[1,"flex","flex-col","flex-1","overflow-hidden"],[1,"flex","flex-row","slots-top"],[1,"flex","flex-row","flex-1","p-5"],[1,"slot","slot-middle","flex-1","flex","flex-col"],[1,"slot","slot-middle","flex-1","flex","flex-col","relative","w-full","h-full","items-center","justify-center","text-center","max-w-sm","max-h-96","rounded-lg",2,"background-image","url('/assets/wood-texture.svg')"],[1,"btn","btn-square","btn-sm","absolute","top-2","left-2",3,"click"],[1,"fas","fa-expand"],[1,"absolute","right-2","top-1","text-black"],[3,"card","size"],[1,"baralho",3,"hidden","click"],[1,"cartas",3,"back","hidden"],[1,"carta-topo",3,"back"],["src","/assets/arrow-rotate.svg",1,"game-rotation","absolute","bottom-3","left-3"],["class","btn mt-2 absolute right-2 bottom-2 sm:btn-sm md:btn-md",3,"click",4,"ngIf"],[1,"flex","flex-row"],[1,"w-full","slot"],[1,"my-cards-container"],[1,"my-cards"],["myCards",""],["class","uno-card",3,"naoPode","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-col","slots-right"],[1,"flex-1",3,"player","vezDele","quantidadeCartas"],[1,"btn","mt-2","absolute","right-2","bottom-2","sm:btn-sm","md:btn-md",3,"click"],[1,"uno-card",3,"click"]],template:function(t,s){1&t&&(e.YNc(0,Ct,30,23,"main",0),e._UZ(1,"app-select-color",1)),2&t&&(e.Q6J("ngIf",s.game&&s.playerMap),e.xp6(1),e.Q6J("select",s.selectColor))},dependencies:[R.sg,R.O5,Ee.s,at,mt],styles:[".game-container[_ngcontent-%COMP%]{flex:1;display:flex;overflow:hidden}.players[_ngcontent-%COMP%]{width:200px;padding:5px}.main-game[_ngcontent-%COMP%]{flex:1;padding:20px;display:flex;align-items:center;justify-content:center;flex-direction:column}.my-cards-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;overflow-x:auto}.my-cards-container.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;pointer-events:none}.my-cards-container[_ngcontent-%COMP%] > .my-cards[_ngcontent-%COMP%]{max-width:100%;overflow-x:auto;display:flex;padding:10px}.my-cards-container[_ngcontent-%COMP%] > .my-cards[_ngcontent-%COMP%] > .uno-card[_ngcontent-%COMP%]{display:flex;margin-right:3px;transition:.1s ease;cursor:pointer}.my-cards-container[_ngcontent-%COMP%]:not(.disabled) > .my-cards[_ngcontent-%COMP%] > .uno-card[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.my-cards-container[_ngcontent-%COMP%]:not(.disabled) > .my-cards[_ngcontent-%COMP%] > .uno-card[_ngcontent-%COMP%]:active{transform:scale(.9)}.my-cards-container[_ngcontent-%COMP%]:not(.disabled) > .my-cards[_ngcontent-%COMP%] > .uno-card.naoPode[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed;pointer-events:none}.slot[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;text-align:center}.slot.empty[_ngcontent-%COMP%]{display:none}  .cards-container{display:flex;align-items:center;justify-content:center}  .slot .name{position:absolute;white-space:nowrap}  .slots-top .slot{justify-content:flex-start;flex-direction:column!important}  .slots-top .slot .cards-container{width:100%;height:50px}  .slots-left .slot{justify-content:flex-start}  .slots-right .slot{justify-content:flex-start;flex-direction:row-reverse}  .slots-left .slot .cards-container,   .slots-right .slot .cards-container{width:50px;height:100%}  .slots-top .slot{flex-direction:column-reverse!important}  .slots-top .slot .name-container{order:-1}  .slots-left .slot .cards-container .cards,   .slots-left .slot .avatar,   .slots-left .slot .name{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}  .slots-left .slot .cards-container .cards,   .slots-left .slot .avatar{--tw-translate-x: -10px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}  .slots-right .slot .cards-container .cards,   .slots-right .slot .avatar,   .slots-right .slot .name{--tw-rotate: -90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}  .slots-right .slot .cards-container .cards,   .slots-right .slot .avatar{--tw-translate-x: 10px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.game-rotation[_ngcontent-%COMP%]{width:5rem;opacity:.3;animation:_ngcontent-%COMP%_rotate 10s linear infinite;pointer-events:none}.game-rotation.inverted[_ngcontent-%COMP%]{--tw-scale-x: -1;--tw-scale-y: -1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));animation-direction:reverse}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0) scaleX(var(--tw-scale-x, 1))}50%{transform:rotate(180deg) scaleX(var(--tw-scale-x, 1))}to{transform:rotate(360deg) scaleX(var(--tw-scale-x, 1))}}.baralho[_ngcontent-%COMP%]   .carta-topo[_ngcontent-%COMP%]{position:absolute;right:.75rem;top:50%;--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.baralho[_ngcontent-%COMP%]   .cartas[_ngcontent-%COMP%]{position:absolute;right:.75rem;top:50%;--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-radius:12px;--tw-shadow: black 5px 5px;--tw-shadow-colored: 5px 5px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.baralho[_ngcontent-%COMP%]:not(.disabled):hover   .carta-topo[_ngcontent-%COMP%]{--tw-translate-x: -.5rem;cursor:pointer;--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);--tw-translate-y:calc(-50% - .5rem);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}"],data:{animation:[n.w,(0,n.q)()]}}),o})();function Pt(o,r){if(1&o&&e._UZ(0,"app-room-error",4),2&o){const t=e.oxw();e.Q6J("err",t.error)}}function Ot(o,r){if(1&o&&e._UZ(0,"app-lobby",5),2&o){const t=e.oxw();e.Q6J("room",t.room)("me",t.me)("socket",t.socket)}}function Mt(o,r){if(1&o&&e._UZ(0,"app-game",6),2&o){const t=e.oxw();e.Q6J("room",t.room)("game",t.room.currentGame)("me",t.me)("socket",t.socket)}}function Rt(o,r){1&o&&e._UZ(0,"app-loading",7),2&o&&e.Q6J("@fade",void 0)}function Ce(o,r,t){if(!o)return;const s=o[r];return s?s.bind(o)(...t):void 0}const It=[{path:"",component:(()=>{class o{constructor(t,s){this.route=t,this.toastr=s,this.me=new U({id:"",name:"Jogador"});const p=this.route.snapshot.queryParamMap.get("id")||"",w=this.route.snapshot.queryParamMap.get("sessionID")||localStorage.getItem("sessionID"),b=this.route.snapshot.queryParamMap.get("name")||localStorage.getItem("name");this.roomID=p,this.socket=new le.s(((o,r,t)=>({url:`${i.O.api}/room/${o}?sessionID=${r}&name=${t}`,options:{transports:["websocket"],withCredentials:!0}}))(p,w||"a",b||"Jo\xe3o")),this.socket.on("connect_error",this.connect_error.bind(this)),this.socket.on("connect",this.connect.bind(this)),this.socket.on("disconnect",this.disconnect.bind(this)),this.socket.on("warning",this.warning.bind(this)),this.socket.on("error",this.errorr.bind(this)),this.socket.on("message",this.message.bind(this)),this.socket.on("player:data",this.player_data.bind(this)),this.socket.on("room:data",this.room_data.bind(this)),this.socket.on("room:setPlayerOnline",this.room_setPlayerOnline.bind(this)),this.socket.ioSocket.onAny(this.socketEvent.bind(this))}ngOnDestroy(){this.socket.off("connect_error",[this.connect_error.bind(this)]),this.socket.off("connect",[this.connect.bind(this)]),this.socket.off("disconnect",[this.disconnect.bind(this)]),this.socket.off("warning",[this.warning.bind(this)]),this.socket.off("error",[this.errorr.bind(this)]),this.socket.off("message",[this.message.bind(this)]),this.socket.off("player:data",[this.player_data.bind(this)]),this.socket.off("room:data",[this.room_data.bind(this)]),this.socket.off("room:setPlayerOnline",[this.room_setPlayerOnline.bind(this)]),this.socket.ioSocket.offAny([this.socketEvent.bind(this)])}connect_error(t){this.error=t?.message||t}connect(){}disconnect(t){this.toastr.error(t,"Conex\xe3o perdida, motivo:")}warning(t){this.toastr.warning(t?.message||t,"AVISO")}errorr(t){this.toastr.error(t?.message||t,"ERRO")}message(t){this.toastr.info(t)}player_data(t){this.me=new U(t)}room_data(t){this.room=new Le(t)}room_setPlayerOnline(t){this.toastr.info(`${t.name} ${t.online?"est\xe1 online":"ficou offline"}`)}socketEvent(t,...s){const[p,w]=t.split(":");switch(p){case"room":Ce(this.room,w,s);break;case"player":Ce(this.me,w,s);break;case"game":Ce(this.room.currentGame,w,s)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(K.gz),e.Y36(a._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-room"]],decls:4,vars:4,consts:[[3,"err",4,"ngIf"],[3,"room","me","socket",4,"ngIf"],[3,"room","game","me","socket",4,"ngIf"],["message","Carregando sala",4,"ngIf"],[3,"err"],[3,"room","me","socket"],[3,"room","game","me","socket"],["message","Carregando sala"]],template:function(t,s){1&t&&(e.YNc(0,Pt,1,1,"app-room-error",0),e.YNc(1,Ot,1,3,"app-lobby",1),e.YNc(2,Mt,1,4,"app-game",2),e.YNc(3,Rt,1,1,"app-loading",3)),2&t&&(e.Q6J("ngIf",s.error),e.xp6(1),e.Q6J("ngIf",s.room&&!s.room.currentGame),e.xp6(1),e.Q6J("ngIf",s.room&&s.room.currentGame),e.xp6(1),e.Q6J("ngIf",!s.room&&!s.error))},dependencies:[R.O5,l.N,h,C,Lt],data:{animation:[(0,n.q)()]}}),o})()}];let Dt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[K.Bz.forChild(It),K.Bz]}),o})();var St=y(9017);let jt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[R.ez,Dt,T.a,St.I]}),o})()},31:(we,te,y)=>{var R;!function(T){var K=Object.hasOwnProperty,le=Array.isArray?Array.isArray:function(i){return"[object Array]"===Object.prototype.toString.call(i)},Y="object"==typeof process&&"function"==typeof process.nextTick,re="function"==typeof Symbol,ce="object"==typeof Reflect,de="function"==typeof setImmediate?setImmediate:setTimeout,P=re?ce&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(n){var i=Object.getOwnPropertyNames(n);return i.push.apply(i,Object.getOwnPropertySymbols(n)),i}:Object.keys;function V(){this._events={},this._conf&&X.call(this,this._conf)}function X(n){n&&(this._conf=n,n.delimiter&&(this.delimiter=n.delimiter),n.maxListeners!==T&&(this._maxListeners=n.maxListeners),n.wildcard&&(this.wildcard=n.wildcard),n.newListener&&(this._newListener=n.newListener),n.removeListener&&(this._removeListener=n.removeListener),n.verboseMemoryLeak&&(this.verboseMemoryLeak=n.verboseMemoryLeak),n.ignoreErrors&&(this.ignoreErrors=n.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function S(n,i){var e="(node) warning: possible EventEmitter memory leak detected. "+n+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(e+=" Event name: "+i+"."),typeof process<"u"&&process.emitWarning){var a=new Error(e);a.name="MaxListenersExceededWarning",a.emitter=this,a.count=n,process.emitWarning(a)}else console.error(e),console.trace&&console.trace()}var G=function(n,i,e){var a=arguments.length;switch(a){case 0:return[];case 1:return[n];case 2:return[n,i];case 3:return[n,i,e];default:for(var l=new Array(a);a--;)l[a]=arguments[a];return l}};function U(n,i){for(var e={},l=n.length,c=i?i.length:0,u=0;u<l;u++)e[n[u]]=u<c?i[u]:T;return e}function ue(n,i,e){var a,l;if(this._emitter=n,this._target=i,this._listeners={},this._listenersCount=0,(e.on||e.off)&&(a=e.on,l=e.off),i.addEventListener?(a=i.addEventListener,l=i.removeEventListener):i.addListener?(a=i.addListener,l=i.removeListener):i.on&&(a=i.on,l=i.off),!a&&!l)throw Error("target does not implement any known event API");if("function"!=typeof a)throw TypeError("on method must be a function");if("function"!=typeof l)throw TypeError("off method must be a function");this._on=a,this._off=l;var c=n._observers;c?c.push(this):n._observers=[this]}function B(n,i,e,a){var l=Object.assign({},i);if(!n)return l;if("object"!=typeof n)throw TypeError("options must be an object");var f,h,m,c=Object.keys(n),u=c.length;function g(x){throw Error('Invalid "'+f+'" option value'+(x?". Reason: "+x:""))}for(var O=0;O<u;O++){if(f=c[O],!a&&!K.call(i,f))throw Error('Unknown "'+f+'" option');(h=n[f])!==T&&(l[f]=(m=e[f])?m(h,g):h)}return l}function Z(n,i){return("function"!=typeof n||!n.hasOwnProperty("prototype"))&&i("value must be a constructor"),n}function he(n){var i="value must be type of "+n.join("|"),e=n.length,a=n[0],l=n[1];return 1===e?function(c,u){if(typeof c===a)return c;u(i)}:2===e?function(c,u){var f=typeof c;if(f===a||f===l)return c;u(i)}:function(c,u){for(var f=typeof c,h=e;h-- >0;)if(f===n[h])return c;u(i)}}Object.assign(ue.prototype,{subscribe:function(n,i,e){var a=this,l=this._target,c=this._emitter,u=this._listeners,f=function(){var h=G.apply(null,arguments),m={data:h,name:i,original:n};e?!1!==e.call(l,m)&&c.emit.apply(c,[m.name].concat(h)):c.emit.apply(c,[i].concat(h))};if(u[n])throw Error("Event '"+n+"' is already listening");this._listenersCount++,c._newListener&&c._removeListener&&!a._onNewListener?(this._onNewListener=function(h){h===i&&null===u[n]&&(u[n]=f,a._on.call(l,n,f))},c.on("newListener",this._onNewListener),this._onRemoveListener=function(h){h===i&&!c.hasListeners(h)&&u[n]&&(u[n]=null,a._off.call(l,n,f))},u[n]=null,c.on("removeListener",this._onRemoveListener)):(u[n]=f,a._on.call(l,n,f))},unsubscribe:function(n){var l,c,h,i=this,e=this._listeners,a=this._emitter,u=this._off,f=this._target;if(n&&"string"!=typeof n)throw TypeError("event must be a string");function m(){i._onNewListener&&(a.off("newListener",i._onNewListener),a.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var g=fe.call(a,i);a._observers.splice(g,1)}if(n){if(!(l=e[n]))return;u.call(f,n,l),delete e[n],--this._listenersCount||m()}else{for(h=(c=P(e)).length;h-- >0;)u.call(f,n=c[h],e[n]);this._listeners={},this._listenersCount=0,m()}}});var d=he(["function"]),ke=he(["object","function"]);function me(n,i,e){var a,l,u,c=0,f=new n(function(h,m,g){function O(){l&&(l=null),c&&(clearTimeout(c),c=0)}e=B(e,{timeout:0,overload:!1},{timeout:function(C,M){return("number"!=typeof(C*=1)||C<0||!Number.isFinite(C))&&M("timeout must be a positive number"),C}});var x=function(C){O(),h(C)},E=function(C){O(),m(C)};(a=!e.overload&&"function"==typeof n.prototype.cancel&&"function"==typeof g)?i(x,E,g):(l=[function(C){E(C||Error("canceled"))}],i(x,E,function(C){if(u)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof C)throw TypeError("onCancel callback must be a function");l.push(C)}),u=!0),e.timeout>0&&(c=setTimeout(function(){var C=Error("timeout");C.code="ETIMEDOUT",c=0,f.cancel(C),m(C)},e.timeout))});return a||(f.cancel=function(h){if(l){for(var m=l.length,g=1;g<m;g++)l[g](h);l[0](h),l=null}}),f}function fe(n){var i=this._observers;if(!i)return-1;for(var e=i.length,a=0;a<e;a++)if(i[a]._target===n)return a;return-1}function L(n,i,e,a,l){if(!e)return null;if(0===a){var c=typeof i;if("string"===c){var u,f,h=0,m=0,g=this.delimiter,O=g.length;if(-1!==(f=i.indexOf(g))){u=new Array(5);do{u[h++]=i.slice(m,f),m=f+O}while(-1!==(f=i.indexOf(g,m)));u[h++]=i.slice(m),i=u,l=h}else i=[i],l=1}else"object"===c?l=i.length:(i=[i],l=1)}var E,C,M,oe,pe,j,A,x=null,H=i[a],ie=i[a+1];if(a===l)e._listeners&&("function"==typeof e._listeners?(n&&n.push(e._listeners),x=[e]):(n&&n.push.apply(n,e._listeners),x=[e]));else{if("*"===H){for(f=(j=P(e)).length;f-- >0;)"_listeners"!==(E=j[f])&&(A=L(n,i,e[E],a+1,l))&&(x?x.push.apply(x,A):x=A);return x}if("**"===H){for((pe=a+1===l||a+2===l&&"*"===ie)&&e._listeners&&(x=L(n,i,e,l,l)),f=(j=P(e)).length;f-- >0;)"_listeners"!==(E=j[f])&&("*"===E||"**"===E?(e[E]._listeners&&!pe&&(A=L(n,i,e[E],l,l))&&(x?x.push.apply(x,A):x=A),A=L(n,i,e[E],a,l)):A=L(n,i,e[E],E===ie?a+2:a,l),A&&(x?x.push.apply(x,A):x=A));return x}e[H]&&(x=L(n,i,e[H],a+1,l))}if((C=e["*"])&&L(n,i,C,a+1,l),M=e["**"])if(a<l)for(M._listeners&&L(n,i,M,l,l),f=(j=P(M)).length;f-- >0;)"_listeners"!==(E=j[f])&&(E===ie?L(n,i,M[E],a+2,l):E===H?L(n,i,M[E],a+1,l):((oe={})[E]=M[E],L(n,i,{"**":oe},a+1,l)));else M._listeners?L(n,i,M,l,l):M["*"]&&M["*"]._listeners&&L(n,i,M["*"],l,l);return x}function ye(n,i,e){var c,h,a=0,l=0,u=this.delimiter,f=u.length;if("string"==typeof n)if(-1!==(c=n.indexOf(u))){h=new Array(5);do{h[a++]=n.slice(l,c),l=c+f}while(-1!==(c=n.indexOf(u,l)));h[a++]=n.slice(l)}else h=[n],a=1;else h=n,a=n.length;if(a>1)for(c=0;c+1<a;c++)if("**"===h[c]&&"**"===h[c+1])return;var g,m=this.listenerTree;for(c=0;c<a;c++)if(m=m[g=h[c]]||(m[g]={}),c===a-1)return m._listeners?("function"==typeof m._listeners&&(m._listeners=[m._listeners]),e?m._listeners.unshift(i):m._listeners.push(i),!m._listeners.warned&&this._maxListeners>0&&m._listeners.length>this._maxListeners&&(m._listeners.warned=!0,S.call(this,m._listeners.length,g))):m._listeners=i,!0;return!0}function $(n,i,e,a){for(var u,f,h,g,l=P(n),c=l.length,m=n._listeners;c-- >0;)u=n[f=l[c]],h="_listeners"===f?e:e?e.concat(f):[f],g=a||"symbol"==typeof f,m&&i.push(g?h:h.join(this.delimiter)),"object"==typeof u&&$.call(this,u,i,h,g);return i}function ne(n){for(var a,l,c,i=P(n),e=i.length;e-- >0;)(a=n[l=i[e]])&&(c=!0,"_listeners"!==l&&!ne(a)&&delete n[l]);return c}function N(n,i,e){this.emitter=n,this.event=i,this.listener=e}function z(n,i,e){if(!0===e)l=!0;else if(!1===e)a=!0;else{if(!e||"object"!=typeof e)throw TypeError("options should be an object or true");var a=e.async,l=e.promisify,c=e.nextTick,u=e.objectify}if(a||c||l){var f=i,h=i._origin||i;if(c&&!Y)throw Error("process.nextTick is not supported");l===T&&(l="AsyncFunction"===i.constructor.name),i=function(){var m=arguments,g=this,O=this.event;return l?c?Promise.resolve():new Promise(function(x){de(x)}).then(function(){return g.event=O,f.apply(g,m)}):(c?process.nextTick:de)(function(){g.event=O,f.apply(g,m)})},i._async=!0,i._origin=h}return[i,u?new N(this,n,i):this]}function v(n){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,X.call(this,n)}N.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},v.EventEmitter2=v,v.prototype.listenTo=function(n,i,e){if("object"!=typeof n)throw TypeError("target musts be an object");var a=this;function l(c){if("object"!=typeof c)throw TypeError("events must be an object");var h,u=e.reducers,f=fe.call(a,n);h=-1===f?new ue(a,n,e):a._observers[f];for(var O,m=P(c),g=m.length,x="function"==typeof u,E=0;E<g;E++)h.subscribe(O=m[E],c[O]||O,x?u:u&&u[O])}return e=B(e,{on:T,off:T,reducers:T},{on:d,off:d,reducers:ke}),le(i)?l(U(i)):l("string"==typeof i?U(i.split(/\s+/)):i),this},v.prototype.stopListeningTo=function(n,i){var e=this._observers;if(!e)return!1;var l,a=e.length,c=!1;if(n&&"object"!=typeof n)throw TypeError("target should be an object");for(;a-- >0;)l=e[a],(!n||l._target===n)&&(l.unsubscribe(i),c=!0);return c},v.prototype.delimiter=".",v.prototype.setMaxListeners=function(n){n!==T&&(this._maxListeners=n,this._conf||(this._conf={}),this._conf.maxListeners=n)},v.prototype.getMaxListeners=function(){return this._maxListeners},v.prototype.event="",v.prototype.once=function(n,i,e){return this._once(n,i,!1,e)},v.prototype.prependOnceListener=function(n,i,e){return this._once(n,i,!0,e)},v.prototype._once=function(n,i,e,a){return this._many(n,1,i,e,a)},v.prototype.many=function(n,i,e,a){return this._many(n,i,e,!1,a)},v.prototype.prependMany=function(n,i,e,a){return this._many(n,i,e,!0,a)},v.prototype._many=function(n,i,e,a,l){var c=this;if("function"!=typeof e)throw new Error("many only accepts instances of Function");function u(){return 0==--i&&c.off(n,u),e.apply(this,arguments)}return u._origin=e,this._on(n,u,a,l)},v.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||V.call(this);var i,a,l,c,u,f,n=arguments[0],e=this.wildcard;if("newListener"===n&&!this._newListener&&!this._events.newListener)return!1;if(e&&(i=n,"newListener"!==n&&"removeListener"!==n&&"object"==typeof n)){if(l=n.length,re)for(c=0;c<l;c++)if("symbol"==typeof n[c]){f=!0;break}f||(n=n.join(this.delimiter))}var m,h=arguments.length;if(this._all&&this._all.length)for(c=0,l=(m=this._all.slice()).length;c<l;c++)switch(this.event=n,h){case 1:m[c].call(this,n);break;case 2:m[c].call(this,n,arguments[1]);break;case 3:m[c].call(this,n,arguments[1],arguments[2]);break;default:m[c].apply(this,arguments)}if(e)L.call(this,m=[],i,this.listenerTree,0,l);else{if("function"==typeof(m=this._events[n])){switch(this.event=n,h){case 1:m.call(this);break;case 2:m.call(this,arguments[1]);break;case 3:m.call(this,arguments[1],arguments[2]);break;default:for(a=new Array(h-1),u=1;u<h;u++)a[u-1]=arguments[u];m.apply(this,a)}return!0}m&&(m=m.slice())}if(m&&m.length){if(h>3)for(a=new Array(h-1),u=1;u<h;u++)a[u-1]=arguments[u];for(c=0,l=m.length;c<l;c++)switch(this.event=n,h){case 1:m[c].call(this);break;case 2:m[c].call(this,arguments[1]);break;case 3:m[c].call(this,arguments[1],arguments[2]);break;default:m[c].apply(this,a)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===n)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},v.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||V.call(this);var e,a,l,c,u,f,n=arguments[0],i=this.wildcard;if("newListener"===n&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(i&&(e=n,"newListener"!==n&&"removeListener"!==n&&"object"==typeof n)){if(c=n.length,re)for(u=0;u<c;u++)if("symbol"==typeof n[u]){a=!0;break}a||(n=n.join(this.delimiter))}var g,h=[],m=arguments.length;if(this._all)for(u=0,c=this._all.length;u<c;u++)switch(this.event=n,m){case 1:h.push(this._all[u].call(this,n));break;case 2:h.push(this._all[u].call(this,n,arguments[1]));break;case 3:h.push(this._all[u].call(this,n,arguments[1],arguments[2]));break;default:h.push(this._all[u].apply(this,arguments))}if(i?L.call(this,g=[],e,this.listenerTree,0):g=this._events[n],"function"==typeof g)switch(this.event=n,m){case 1:h.push(g.call(this));break;case 2:h.push(g.call(this,arguments[1]));break;case 3:h.push(g.call(this,arguments[1],arguments[2]));break;default:for(l=new Array(m-1),f=1;f<m;f++)l[f-1]=arguments[f];h.push(g.apply(this,l))}else if(g&&g.length){if(g=g.slice(),m>3)for(l=new Array(m-1),f=1;f<m;f++)l[f-1]=arguments[f];for(u=0,c=g.length;u<c;u++)switch(this.event=n,m){case 1:h.push(g[u].call(this));break;case 2:h.push(g[u].call(this,arguments[1]));break;case 3:h.push(g[u].call(this,arguments[1],arguments[2]));break;default:h.push(g[u].apply(this,l))}}else if(!this.ignoreErrors&&!this._all&&"error"===n)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(h)},v.prototype.on=function(n,i,e){return this._on(n,i,!1,e)},v.prototype.prependListener=function(n,i,e){return this._on(n,i,!0,e)},v.prototype.onAny=function(n){return this._onAny(n,!1)},v.prototype.prependAny=function(n){return this._onAny(n,!0)},v.prototype.addListener=v.prototype.on,v.prototype._onAny=function(n,i){if("function"!=typeof n)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),i?this._all.unshift(n):this._all.push(n),this},v.prototype._on=function(n,i,e,a){if("function"==typeof n)return this._onAny(n,i),this;if("function"!=typeof i)throw new Error("on only accepts instances of Function");this._events||V.call(this);var c,l=this;return a!==T&&(i=(c=z.call(this,n,i,a))[0],l=c[1]),this._newListener&&this.emit("newListener",n,i),this.wildcard?(ye.call(this,n,i,e),l):(this._events[n]?("function"==typeof this._events[n]&&(this._events[n]=[this._events[n]]),e?this._events[n].unshift(i):this._events[n].push(i),!this._events[n].warned&&this._maxListeners>0&&this._events[n].length>this._maxListeners&&(this._events[n].warned=!0,S.call(this,this._events[n].length,n))):this._events[n]=i,l)},v.prototype.off=function(n,i){if("function"!=typeof i)throw new Error("removeListener only takes instances of Function");var e,a=[];if(this.wildcard){var l="string"==typeof n?n.split(this.delimiter):n.slice();if(!(a=L.call(this,null,l,this.listenerTree,0)))return this}else{if(!this._events[n])return this;a.push({_listeners:e=this._events[n]})}for(var c=0;c<a.length;c++){var u=a[c];if(le(e=u._listeners)){for(var f=-1,h=0,m=e.length;h<m;h++)if(e[h]===i||e[h].listener&&e[h].listener===i||e[h]._origin&&e[h]._origin===i){f=h;break}if(f<0)continue;return this.wildcard?u._listeners.splice(f,1):this._events[n].splice(f,1),0===e.length&&(this.wildcard?delete u._listeners:delete this._events[n]),this._removeListener&&this.emit("removeListener",n,i),this}(e===i||e.listener&&e.listener===i||e._origin&&e._origin===i)&&(this.wildcard?delete u._listeners:delete this._events[n],this._removeListener&&this.emit("removeListener",n,i))}return this.listenerTree&&ne(this.listenerTree),this},v.prototype.offAny=function(n){var a,i=0,e=0;if(n&&this._all&&this._all.length>0){for(i=0,e=(a=this._all).length;i<e;i++)if(n===a[i])return a.splice(i,1),this._removeListener&&this.emit("removeListenerAny",n),this}else{if(a=this._all,this._removeListener)for(i=0,e=a.length;i<e;i++)this.emit("removeListenerAny",a[i]);this._all=[]}return this},v.prototype.removeListener=v.prototype.off,v.prototype.removeAllListeners=function(n){if(n===T)return!this._events||V.call(this),this;if(this.wildcard){var a,i=L.call(this,null,n,this.listenerTree,0);if(!i)return this;for(a=0;a<i.length;a++)i[a]._listeners=null;this.listenerTree&&ne(this.listenerTree)}else this._events&&(this._events[n]=null);return this},v.prototype.listeners=function(n){var e,a,l,c,u,i=this._events;if(n===T){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!i)return[];for(c=(e=P(i)).length,l=[];c-- >0;)"function"==typeof(a=i[e[c]])?l.push(a):l.push.apply(l,a);return l}if(this.wildcard){if(!(u=this.listenerTree))return[];var f=[],h="string"==typeof n?n.split(this.delimiter):n.slice();return L.call(this,f,h,u,0),f}return i&&(a=i[n])?"function"==typeof a?[a]:a:[]},v.prototype.eventNames=function(n){var i=this._events;return this.wildcard?$.call(this,this.listenerTree,[],null,n):i?P(i):[]},v.prototype.listenerCount=function(n){return this.listeners(n).length},v.prototype.hasListeners=function(n){if(this.wildcard){var i=[],e="string"==typeof n?n.split(this.delimiter):n.slice();return L.call(this,i,e,this.listenerTree,0),i.length>0}var a=this._events,l=this._all;return!!(l&&l.length||a&&(n===T?P(a).length:a[n]))},v.prototype.listenersAny=function(){return this._all?this._all:[]},v.prototype.waitFor=function(n,i){var e=this,a=typeof i;return"number"===a?i={timeout:i}:"function"===a&&(i={filter:i}),me((i=B(i,{timeout:0,filter:T,handleError:!1,Promise,overload:!1},{filter:d,Promise:Z})).Promise,function(l,c,u){function f(){var h=i.filter;if(!h||h.apply(e,arguments))if(e.off(n,f),i.handleError){var m=arguments[0];m?c(m):l(G.apply(null,arguments).slice(1))}else l(G.apply(null,arguments))}u(function(){e.off(n,f)}),e._on(n,f,!1)},{timeout:i.timeout,overload:i.overload})};var J=v.prototype;Object.defineProperties(v,{defaultMaxListeners:{get:function(){return J._maxListeners},set:function(n){if("number"!=typeof n||n<0||Number.isNaN(n))throw TypeError("n must be a non-negative number");J._maxListeners=n},enumerable:!0},once:{value:function D(n,i,e){return me((e=B(e,{Promise,timeout:0,overload:!1},{Promise:Z})).Promise,function(l,c,u){var f;if("function"==typeof n.addEventListener)return f=function(){l(G.apply(null,arguments))},u(function(){n.removeEventListener(i,f)}),void n.addEventListener(i,f,{once:!0});var m,h=function(){m&&n.removeListener("error",m),l(G.apply(null,arguments))};"error"!==i&&(m=function(g){n.removeListener(i,h),c(g)},n.once("error",m)),u(function(){m&&n.removeListener("error",m),n.removeListener(i,h)}),n.once(i,h)},{timeout:e.timeout,overload:e.overload})},writable:!0,configurable:!0}}),Object.defineProperties(J,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),(R=function(){return v}.call(te,y,te,we))!==T&&(we.exports=R)}()}}]);